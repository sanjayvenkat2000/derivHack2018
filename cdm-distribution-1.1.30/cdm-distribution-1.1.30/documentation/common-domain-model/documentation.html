

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The ISDA Common Domain Model &mdash; ISDA CDM 1.1.30 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to the ISDA CDM documentation!" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ISDA CDM
          

          
          </a>

          
            
            
              <div class="version">
                1.1.30
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">The ISDA Common Domain Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="#the-rosetta-workbench">The Rosetta Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="#cdm-modelling-artefacts">CDM Modelling Artefacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data-representation-artefacts">Data Representation Artefacts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syntax">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enumerations">Enumerations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enumeration-values">Enumeration Values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#choice-rules">Choice Rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#one-of-syntax-as-a-complement-to-the-choice-rule">One of syntax as a complement to the choice rule</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#aliases">Aliases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mapping-artefacts">Mapping Artefacts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synonyms">Synonyms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mapping-logic">Mapping Logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-validation-artefacts">Data Validation Artefacts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-rules">Data Rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#object-qualification-artefacts">Object Qualification Artefacts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#product-qualification">Product Qualification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id17">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#event-qualification">Event Qualification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#calculation-artefacts">Calculation Artefacts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id21">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#cdm-model">CDM Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#product-model">Product Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#contractual-derivative-products">Contractual Derivative Products</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#post-execution-the-contract">Post-execution: the contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-economic-terms">The economic terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#infering-the-product-qualification-from-its-economic-terms">Infering the product qualification from its economic terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#infering-the-event-qualification-from-its-features">Infering the event qualification from its features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#listed-products-as-underlyers-of-derivative-products">Listed Products as Underlyers of Derivative Products</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loans-and-mortgages-as-underlyers-of-derivative-products">Loans and Mortgages as Underlyers of Derivative Products</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#event-model">Event Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#baseline-event-modelling-features">Baseline event modelling features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#primitive-events">Primitive events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#event-qualification-from-primitive-events-and-intent-qualification">Event qualification from primitive events and intent qualification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#interest-calculation">Interest Calculation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fixed-amount-and-floating-amount-definitions">Fixed Amount and Floating Amount Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#day-count-fractions">Day Count Fractions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reference-data-model">Reference Data Model</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ISDA CDM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The ISDA Common Domain Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/documentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-isda-common-domain-model">
<h1>The ISDA Common Domain Model<a class="headerlink" href="#the-isda-common-domain-model" title="Permalink to this headline">Â¶</a></h1>
<p>The ISDA Common Domain Model is an initiative that ISDA has spearheaded to produce a common, robust, digital blueprint for how derivatives are traded and managed across their lifecycle. It is based on the design principles specified as part of ISDAâs October 2017 <a class="reference external" href="https://www.isda.org/a/gVKDE/CDM-FINAL.pdf">CDM concept paper</a> for a product scope limited to simple interest and credit derivative products and an agreed sample of business events.</p>
<p>ISDA anticipates that establishing such digital data and processing standards will lead to the following benefits:</p>
<ul class="simple">
<li>Reduce the current need for continual reconciliations to address mismatches caused by variations in how each firm records trade lifecycle events;</li>
<li>Enable consistency in regulatory compliance and reporting;</li>
<li>Accelerate greater automation and efficiency in the derivatives market;</li>
<li>Provide a common foundation for new technologies like distributed ledger, cloud and smart contracts to facilitate data consistency;</li>
<li>Facilitate interoperability across firms and platforms.</li>
</ul>
<p>A high-level presentation of the ISDA CDM and additional information is available on the ISDA website (<a class="reference external" href="http://www.isda.org/">www.isda.org</a>) and particularly with the referred <a class="reference external" href="https://www.isda.org/2017/11/30/what-is-the-isda-cdm/">Short Video</a>.</p>
</div>
<div class="section" id="the-rosetta-workbench">
<h1>The Rosetta Workbench<a class="headerlink" href="#the-rosetta-workbench" title="Permalink to this headline">Â¶</a></h1>
<p>To tie the design choices made by the Working Group to how they manifest practically, we make reference to the Rosetta Workbench which we will refer to simply as Rosetta. It is useful to think of Rosetta as a set of tools to use when creating domain models. Much like how software engineers use programming languages and tools to create software.</p>
<p>Rosetta is a digital repository whose purpose is to consolidate market standards and practices into a cohesive model, from which executable code is automatically generated.</p>
<p>The key idea behind Rosetta is that financial markets presently have two unappealing characteristics as it relates to their supporting electronic data representation:</p>
<ul class="simple">
<li><strong>Variety of data representations</strong>. The plurality of data standards (the main ones being FIX, FpML, ISO 20022 and EFET) is compounded by the many variations in the implementation of those, to which we need to add a wide range of proprietary data representations.</li>
<li><strong>Limited availability of native digital tools</strong> that would allow those data representations to be directly translated into executable code. Even the protocols that have a native digital representation (e.g.&nbsp;FpML and FIXML, which are available in the form of XML schemas) have associated specifications artefacts which require further manual specification and/or coding in order to result in a complete executable solution. In FpML, this is the case of the associated validation rules. In FIX, an example of such are the Recommended Practices/Guidelines, which are only available in the form of PDF documents.</li>
</ul>
<p>Rosetta is looking to address those shortcomings by <strong>consolidating various data and workflow representations into a cohesive model</strong> (hence the naming reference to the Rosetta Stone), which can be <strong>automatically translated into executable code</strong>.</p>
<div class="figure">
<img alt="_images/rosetta-components.png" src="_images/rosetta-components.png" />
</div>
<p>As illustrated by the above picture, Rosetta has two main components as it relates to its usage as part of the ISDA CDM: the Model Repository and the Rosetta Workbench.</p>
<p>The <strong>Model Repository</strong> has two components:</p>
<ul class="simple">
<li>The <strong>legible model</strong>, that expresses the data and associated logic using the Rosetta syntax.</li>
<li>The <strong>projection of this model</strong> into a variery of executable code representations (presently, JSON and Java).</li>
</ul>
<p>The <strong>Rosetta Workbench</strong> corresponds to the toolset that supports the CDM, through 4 sets of functions:</p>
<ul class="simple">
<li>The <strong>grammar</strong>, which is specified as part of a Domain Specific Language (DLS) component which has been developed using open source software. While the CDM syntax is based upon this grammar, access to this grammar is needed for using the CDM.</li>
<li>The <strong>navigation tools</strong>, which expose through a web portal a textual and a graphical interface into the CDM.</li>
<li>The <strong>ingestion service</strong>, which transforms events and trades expressed using alternative data representations into JSON documents that conform to the CDM. At present, the ingested trades confirm to the version 5.10 of the FpML standard, and the events are originated using a custom data representation.</li>
<li>The <strong>code generators</strong>, which are used to produce the executable code projections that are part of the model repository. Those code generators are developed using the same open source software component as the grammar, and access to those is not required for CDM usage purposes.</li>
</ul>
<p>Those worbench components are presented in the below picture, the further one being the milestoned CDM 1.0 version of the model. Once further version of the CDM will be released, this icon will be repositioned as a generic access to those respective versions.</p>
<div class="figure">
<img alt="_images/rosetta-home.png" src="_images/rosetta-home.png" />
</div>
</div>
<div class="section" id="cdm-modelling-artefacts">
<h1>CDM Modelling Artefacts<a class="headerlink" href="#cdm-modelling-artefacts" title="Permalink to this headline">Â¶</a></h1>
<p>The CDM combines <strong>five modelling artefacts</strong>, which are consistently expressed through the Rosetta syntax:</p>
<ul class="simple">
<li>Data representation</li>
<li>Mapping</li>
<li>Data validation</li>
<li>Object qualification</li>
<li>Calculation</li>
</ul>
<p>The below sections of this documentation detail the purpose and features of each of those CDM artefacts, and highlight the relationships that exists among those.</p>
<div class="section" id="data-representation-artefacts">
<h2>Data Representation Artefacts<a class="headerlink" href="#data-representation-artefacts" title="Permalink to this headline">Â¶</a></h2>
<p>Rosetta makes use of <strong>six data representation components</strong> to represent the CDM:</p>
<ul class="simple">
<li>Classes</li>
<li>Attributes</li>
<li>Enumerations</li>
<li>Enumerations values</li>
<li>Choice rules</li>
<li>Aliases</li>
</ul>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="purpose">
<h4>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">Â¶</a></h4>
<p>CDM classes are objects that contain the granular data representation elements, in the form of attributes.</p>
</div>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">Â¶</a></h4>
<p>The class is delineated by brackets <code class="docutils literal notranslate"><span class="pre">{</span></code> <code class="docutils literal notranslate"><span class="pre">}</span></code>.</p>
<p>The CDM supports the concept of <strong>abstract classes</strong>, which cannot be instantiated as part of the generated executable code and are meant to be extended by other classes.  An example of such is the <code class="docutils literal notranslate"><span class="pre">ListedHeader</span></code> class, which contains the attributes that are common among listed products.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">ListedHeader</span> <span class="o">&lt;</span><span class="s">&quot;An abstract class to holds the attributes that are common across listed products.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">anchor</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span><span class="o">]</span>
 <span class="n">productTaxonomy</span> <span class="nf">ProductTaxonomy</span> <span class="o">(</span><span class="mf">1.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;The product taxonomy value(s) associated with a product.&quot;</span><span class="o">&gt;;</span>
 <span class="n">productIdentifier</span> <span class="nf">ProductIdentifier</span> <span class="o">(</span><span class="mf">1.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;There can be several identifiers associated with a given product.&quot;</span><span class="o">&gt;;</span>
 <span class="n">description</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The product name.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">description</span><span class="o">]</span>
 <span class="n">currency</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">scheme</span> <span class="s">&quot;currencyScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;The denomination currency of the instrument.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">currency</span><span class="o">]</span>
 <span class="n">clearanceSystem</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">scheme</span> <span class="s">&quot;clearanceSystemScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;Identification of the clearance system associated with the transaction exchange.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">clearanceSystem</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The Rosetta convention is that class names start with a capital letter. Class names need to be unique across the model, including with respect to rule names. Both those are controlled by the Rosetta grammar.</p>
</div>
</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id1">
<h4>Purpose<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h4>
<p>Attributes specify the granular model elements in terms of type of value (e.g.&nbsp;<code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, enumerated value), cardinality and through an associated definition.</p>
</div>
<div class="section" id="id2">
<h4>Syntax<a class="headerlink" href="#id2" title="Permalink to this headline">Â¶</a></h4>
<p>A Rosetta attribute can be specified either as a basic type, a class or an enumeration.</p>
<p>The set of <strong>basic types</strong> available in Rosetta are:</p>
<p>Text - <code class="docutils literal notranslate"><span class="pre">string</span></code></p>
<p>Number - <code class="docutils literal notranslate"><span class="pre">int</span></code> - <code class="docutils literal notranslate"><span class="pre">number</span></code></p>
<p>Logic - <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p>
<p>Date and Time - <code class="docutils literal notranslate"><span class="pre">date</span></code> - <code class="docutils literal notranslate"><span class="pre">dateTime</span></code> - <code class="docutils literal notranslate"><span class="pre">time</span></code></p>
<p>Calculation - <code class="docutils literal notranslate"><span class="pre">calculation</span></code> (The <code class="docutils literal notranslate"><span class="pre">calculation</span></code> qualifier represents the outcome of the CDM interest accrual calculation. It is currently associated with two attributes: <code class="docutils literal notranslate"><span class="pre">cashflowCalculation</span></code> in the <code class="docutils literal notranslate"><span class="pre">Cashflow</span></code> class, and <code class="docutils literal notranslate"><span class="pre">callFunction</span></code> in the <code class="docutils literal notranslate"><span class="pre">computedAmount</span></code> class.)</p>
<p>Product and event qualification - <code class="docutils literal notranslate"><span class="pre">productType</span></code> - <code class="docutils literal notranslate"><span class="pre">eventType</span></code></p>
<p>Rosetta syntax convention is for attribute names to be expressed in lower case, and a warning will be generated by the grammar if this is not the case. Attribute names need to be unique within the context of a class (and within the context of the base class, if a class extends another class), but can be duplicated across classes. The semi-column <code class="docutils literal notranslate"><span class="pre">;</span></code> acts as the terminal character for the attribute specification, with associated synonyms being positioned underneath that specification line.</p>
<p>The CDM provides the ability to associate a set of <strong>qualifiers</strong> to the attributes: <code class="docutils literal notranslate"><span class="pre">anchor</span></code>, <code class="docutils literal notranslate"><span class="pre">reference</span></code>, <code class="docutils literal notranslate"><span class="pre">scheme</span></code>, <code class="docutils literal notranslate"><span class="pre">rosettaKey</span></code> and <code class="docutils literal notranslate"><span class="pre">rosettaKeyValues</span></code>.</p>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">anchor</span></code> and <code class="docutils literal notranslate"><span class="pre">reference</span></code> qualifiers represent the cross-referencing mechanism widely used in the XML space (and particularly as part of the FpML standard) as a way to provide data integrity within the context of an instance document.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">scheme</span></code> qualifier specifies scheme references.</p>
<p>The below CDM snippet provides a good illustration as to how those 3 qualifiers are implemented, with the <code class="docutils literal notranslate"><span class="pre">anchor</span></code> qualifier being associated to the <code class="docutils literal notranslate"><span class="pre">id</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">Party</span></code> class, while the <code class="docutils literal notranslate"><span class="pre">reference</span></code> is associated to the <code class="docutils literal notranslate"><span class="pre">partyReference</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">PartyAndAccountReference</span></code> class.  The values associated with the <em>partyIdScheme</em> being not specified by FpML, this scheme is associated as such with the <code class="docutils literal notranslate"><span class="pre">partyId</span></code> attribute.  (As detailed in the Enumerations section below, the schemes which values are specified by FpML are positioned as CDM enumerations.)</p>
</li>
</ul>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Party</span> <span class="o">&lt;</span><span class="s">&quot;The party class.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">Party</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">anchor</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span><span class="o">]</span>
 <span class="n">partyId</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1.</span><span class="o">.*)</span> <span class="n">scheme</span> <span class="s">&quot;partyIdScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;The identifier associated with a party, e.g.  the 20 digits LEI code.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">partyId</span><span class="o">]</span>
 <span class="n">legalEntity</span> <span class="nf">LegalEntity</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
 <span class="n">naturalPerson</span> <span class="nf">NaturalPerson</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">PartyAndAccountReference</span> <span class="o">&lt;</span><span class="s">&quot;This class corresponds to the FpML PartyAndAccountReferences.model.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">partyReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="n">reference</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">partyReference</span><span class="o">]</span>
 <span class="n">accountReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">reference</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">accountReference</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">rosettaKey</span></code> corresponds to a hash code generated by the CDM as part of the <code class="docutils literal notranslate"><span class="pre">EventEffect</span></code> features, which are further detailed below as part of the CDM Model section. In essence, the rosettaKey hash value associated with the relevant class (<code class="docutils literal notranslate"><span class="pre">Payment</span></code> in the below snippet) is also associated with the corresponding attribute in the <code class="docutils literal notranslate"><span class="pre">EventEffect</span></code> class (in this case, the <code class="docutils literal notranslate"><span class="pre">payment</span></code> attribute).</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">EventEffect</span> <span class="o">&lt;</span><span class="s">&quot;The set of operational and positional effects associated with a lifecycle event.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">effectedContract</span> <span class="nf">ContractOrContractReference</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the contract(s) (or reference contract(s)) to which the event effect(s) apply, i.e. in the before event state.&quot;</span><span class="o">&gt;;</span>
 <span class="n">effectedEvent</span> <span class="nf">Event</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the event to which the event effect(s) apply.&quot;</span><span class="o">&gt;;</span>
 <span class="n">contract</span> <span class="nf">ContractOrContractReference</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the contract (or contract reference) effect(s), an example of such being the outcome of a new trade, swaption exercise or novation event.&quot;</span><span class="o">&gt;;</span>
 <span class="n">listedProduct</span> <span class="nf">ListedProduct</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the listed product effect(s), an example of such being the outcome of the physical exercise of a bond option.&quot;</span><span class="o">&gt;;</span>
 <span class="n">payment</span> <span class="nf">Payment</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the payment effect(s), an example of such being the outcome of an option cash exercise.&quot;</span><span class="o">&gt;;</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Payment</span> <span class="kd">extends</span> <span class="n">CashflowBase</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A class for defining payments, an artefact to be used as the input to a payment system or the outcome of it, and is to be distinguished from a cashflow, which is the raw outcome of a calculation or some other assessment. Rosetta extends the FpML Payment type for the purpose of supporting premium payment, by adding the premiumExpression and the paymentDiscounting attributes.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
       <span class="n">paymentAmount</span> <span class="nf">Money</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The currency amount of the payment.&quot;</span><span class="o">&gt;;</span>
       <span class="n">paymentDate</span> <span class="nf">AdjustableOrAdjustedOrRelativeDate</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The payment date. While FpML specifies this element to be of type AdjustableOrAdjustedDate, Rosetta uses the AdjustableOrAdjustedOrRelativeDate to accommodate the credit default swap option premium, which uses the relative date construct.&quot;</span><span class="o">&gt;;</span>
       <span class="n">paymentType</span> <span class="nf">PaymentTypeEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">paymentType</span><span class="o">]</span>
       <span class="n">grossCashflow</span> <span class="nf">GrossCashflow</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;The gross cashflow components from which the payment would be derived when corresponding to a netted amount across those components.&quot;</span><span class="o">&gt;;</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">grossCashflow</span><span class="o">]</span>
       <span class="n">paymentStatus</span> <span class="nf">PaymentStatusEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The payment status, e.g. Instructed, Settled.&quot;</span><span class="o">&gt;;</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">paymentStatus</span><span class="o">]</span>
       <span class="n">settlementReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The settlement reference, when applicable.&quot;</span><span class="o">&gt;;</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">settlementReference</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">rosettaKeyValue</span></code> is a variation of the <code class="docutils literal notranslate"><span class="pre">RosettaKey</span></code>, which associated hash function doesnât include any of those qualifiers that are associated with the attributes.  The reasoning is that some of those qualifiers are automatically generated by algorithm (typically, the anchors and references associated with XML documents) and would then result in differences between two instance documents, even if those documents would have the same actual values. The <code class="docutils literal notranslate"><span class="pre">RosettaKeyValue</span></code> is meant to be used for supporting the reconciliation of economic terms, and is hence associated with the <code class="docutils literal notranslate"><span class="pre">EconomicTerms</span></code> class.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">EconomicTerms</span> <span class="n">rosettaKeyValue</span> <span class="o">&lt;</span><span class="s">&quot;This class represents the full set of product economics: the payout component, as well as the legal optional provisions which have valuation implications. A rosettaKey hash is associated to the contractual product economic terms for the purpose of supporting hash-based reconciliations.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
       <span class="n">payout</span> <span class="nf">Payout</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The payout specification, which can combine several payout terms, e.g. an interest rate and a credit default payout in the case of a credit default swap.&quot;</span><span class="o">&gt;;</span>
       <span class="n">earlyTerminationProvision</span> <span class="nf">EarlyTerminationProvision</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;Parameters specifying provisions relating to the optional and mandatory early termination of a swap transaction.&quot;</span><span class="o">&gt;;</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">earlyTerminationProvision</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swap&quot;</span><span class="o">]</span>
       <span class="n">cancelableProvision</span> <span class="nf">CancelableProvision</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;A provision that allows the specification of an embedded option within a swap giving the buyer of the option the right to terminate the swap, in whole or in part, on the early termination date.&quot;</span><span class="o">&gt;;</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">cancelableProvision</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swap&quot;</span><span class="o">]</span>
       <span class="n">extendibleProvision</span> <span class="nf">ExtendibleProvision</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;A provision that allows the specification of an embedded option with a swap giving the buyer of the option the right to extend the swap, in whole or in part, to the extended termination date.&quot;</span><span class="o">&gt;;</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The reason for supporting those two implementations is that there is a need for associating a hash to the <code class="docutils literal notranslate"><span class="pre">ContractReference</span></code> class, which would obviously not work if the hash would not include the attribute qualifiers. This class is indeed in essence a reference to a contract instance:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">ContractReference</span> <span class="kd">extends</span> <span class="n">ContractIdentifier</span>
<span class="o">{</span>
 <span class="n">state</span> <span class="nf">StateEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The state qualification of a contractual product.&quot;</span><span class="o">&gt;;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">state</span><span class="o">]</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ContractIdentifier</span> <span class="kd">extends</span> <span class="n">Identifier</span> <span class="o">&lt;</span><span class="s">&quot;A class defining a trade identifier issued by the indicated party. The CDM doesn&#39;t extends the base class PartyAndAccountReference because of the choice logic with the issuer element.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">TradeIdentifier</span><span class="o">]</span>
<span class="o">{</span>
  <span class="n">partyReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">reference</span> <span class="o">&lt;</span><span class="s">&quot;Reference to a party.&quot;</span><span class="o">&gt;;</span>
    <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">partyReference</span><span class="o">]</span>
  <span class="n">accountReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">reference</span> <span class="o">&lt;</span><span class="s">&quot;Reference to an account.&quot;</span><span class="o">&gt;;</span>
    <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">accountReference</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id3">
<h4>Purpose<a class="headerlink" href="#id3" title="Permalink to this headline">Â¶</a></h4>
<p>Enumerations are the mechanism through which controlled values are specified at the attribute level. They are the container for the corresponding set of enumeration values.</p>
<p>As mentioned in the preceding section, with respect to the FpML standard, the schemes which values are specified as part of the standard are represented through enumerations in the CDM, while schemes with no defined values are represented in the CDM as a type <code class="docutils literal notranslate"><span class="pre">string</span></code>. In both cases, the scheme reference associated with the originating element is also associated to the CDM attribute, one of the CDM principles being that no originating information should be disregarded.</p>
</div>
<div class="section" id="id4">
<h4>Syntax<a class="headerlink" href="#id4" title="Permalink to this headline">Â¶</a></h4>
<p>Enumerations are very simple modelling container artefacts. They can have associated synonyms and regulatory references.</p>
<p>Similar to the class, the enumeration is delineated by brackets <code class="docutils literal notranslate"><span class="pre">{</span></code> <code class="docutils literal notranslate"><span class="pre">}</span></code>.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="n">CouponTypeEnum</span> <span class="o">&lt;</span><span class="s">&quot;The enumerated values to specify if the bond has a variable coupon, step-up/down coupon or a zero-coupon.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">couponTypeScheme</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">Fixed</span> <span class="o">&lt;</span><span class="s">&quot;Bond has fixed rate coupon.&quot;</span><span class="o">&gt;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="s">&quot;Fixed&quot;</span><span class="o">],</span>
 <span class="n">Float</span> <span class="o">&lt;</span><span class="s">&quot;Bond has floating rate coupon.&quot;</span><span class="o">&gt;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="s">&quot;Float&quot;</span><span class="o">],</span>
 <span class="n">Structured</span> <span class="o">&lt;</span><span class="s">&quot;Bond has structured coupon.&quot;</span><span class="o">&gt;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="s">&quot;Struct&quot;</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="enumeration-values">
<h3>Enumeration Values<a class="headerlink" href="#enumeration-values" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id5">
<h4>Purpose<a class="headerlink" href="#id5" title="Permalink to this headline">Â¶</a></h4>
<p>As indicated in the above section, enumeration values are the set of controlled values that are specified as part of an enumeration container.</p>
</div>
<div class="section" id="id6">
<h4>Syntax<a class="headerlink" href="#id6" title="Permalink to this headline">Â¶</a></h4>
<p>Enumeration values have a restricted syntax for the purpose of facilitating their integration with executable code: they cannot start with a numerical digit, and the only special character that can be associated with them is the underscore <code class="docutils literal notranslate"><span class="pre">_</span></code>.</p>
<p>In order to handle the integration of FpML scheme values such as the <em>dayCountFractionScheme</em> which has values such as <code class="docutils literal notranslate"><span class="pre">ACT/365.FIXED</span></code> or <code class="docutils literal notranslate"><span class="pre">30/360</span></code>, the Rosetta syntax provides the ability to associate a <strong>displayName synonym</strong>. Those values are then specified in the CDM as <code class="docutils literal notranslate"><span class="pre">ACT_365_FIXED</span></code> and <code class="docutils literal notranslate"><span class="pre">_30_360</span></code>, with the associated display names of <code class="docutils literal notranslate"><span class="pre">ACT/365.FIXED</span></code> and <code class="docutils literal notranslate"><span class="pre">30/360</span></code>, respectively.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="n">DayCountFractionEnum</span> <span class="o">&lt;</span><span class="s">&quot;The enumerated values to specify the day count fraction.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">dayCountFractionScheme</span><span class="o">]</span>
<span class="o">{</span>
 <span class="o">(...)</span>
 <span class="n">ACT_360</span> <span class="n">displayName</span> <span class="s">&quot;ACT/360&quot;</span> <span class="o">&lt;</span><span class="s">&quot;Per 2006 ISDA Definitions, Section 4.16. Day Count Fraction, paragraph (e) or Annex to the 2000 ISDA Definitions (June 2000 Version), Section 4.16. Day Count Fraction, paragraph (d).&quot;</span><span class="o">&gt;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="s">&quot;ACT/360&quot;</span><span class="o">],</span>
 <span class="n">ACT_ACT_ISDA</span> <span class="n">displayName</span> <span class="s">&quot;ACT/ACT.ISDA&quot;</span> <span class="o">&lt;</span><span class="s">&quot;Per 2006 ISDA Definitions, Section 4.16. Day Count Fraction, paragraph (b) or Annex to the 2000 ISDA Definitions (June 2000 Version), Section 4.16. Day Count Fraction, paragraph (b). Note that going from FpML 2.0 Recommendation to the FpML 3.0 Trial Recommendation the code in FpML 2.0 &#39;ACT/365.ISDA&#39; became &#39;ACT/ACT.ISDA&#39;.&quot;</span><span class="o">&gt;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="s">&quot;ACT/ACT.ISDA&quot;</span><span class="o">],</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <strong>synonym syntax</strong> associated with enumeration values differs in two respects from the synonyms associated with other CDM artefacts:</p>
<ul class="simple">
<li>The synonym value is of type <code class="docutils literal notranslate"><span class="pre">string</span></code>, for the above reason related to the need to facilitate integration with executable code. (The alternative approach consisting in specifying the value as a compatible identifier alongside with a display name has been disregarded because it has been deemed not appropriate to create a âcode-friendlyâ value for the respective synonyms. A <code class="docutils literal notranslate"><span class="pre">string</span></code> type removes such need.)</li>
<li>Although this use case is not part of the current CDM scope, the ability to associate a definition to a synonym value has been enabled, the objective being to effectively support the FIX use cases where the synonym value is a letter or numerical code, which is then positioned as the prefix of the associated definition. Although not part of the CDM 1.0 scope, the <code class="docutils literal notranslate"><span class="pre">TimeInForceEnum</span></code> illustrates this approach:</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="n">TimeInForceEnum</span> <span class="o">&lt;</span><span class="s">&quot;The enumeration values to specify the period of time during which an order remains in effect.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FIX</span> <span class="n">value</span> <span class="n">TimeInForce</span> <span class="n">tag</span> <span class="mi">59</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">Day</span> <span class="o">&lt;</span><span class="s">&quot;Day (or session)&quot;</span><span class="o">&gt;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FIX</span> <span class="n">value</span> <span class="s">&quot;0&quot;</span> <span class="n">definition</span> <span class="s">&quot;0 = Day (or session)&quot;</span><span class="o">],</span>
 <span class="n">GoodTillCancel</span> <span class="o">&lt;</span><span class="s">&quot;Good Till Cancel (GTC)&quot;</span><span class="o">&gt;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FIX</span> <span class="n">value</span> <span class="s">&quot;1&quot;</span> <span class="n">definition</span> <span class="s">&quot;1 = Good Till Cancel (GTC)&quot;</span><span class="o">],</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="choice-rules">
<h3>Choice Rules<a class="headerlink" href="#choice-rules" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id7">
<h4>Purpose<a class="headerlink" href="#id7" title="Permalink to this headline">Â¶</a></h4>
<p>Choice rules apply within the context of a class. They define a choice constraint between a set of attributes. They are meant as a simple and robust construct to translate the XML <em>xsd:choicesyntax</em> as part of any model created using Rosetta, although their usage is not limited to those XML use cases.</p>
</div>
<div class="section" id="id8">
<h4>Syntax<a class="headerlink" href="#id8" title="Permalink to this headline">Â¶</a></h4>
<p>Choice rules only apply within the context of a class, and the naming convention is <code class="docutils literal notranslate"><span class="pre">&lt;className&gt;_choice</span></code>, e.g.&nbsp;<code class="docutils literal notranslate"><span class="pre">TradeIdentifier_choice</span></code>. If multiple choice rules exist in relation to a class, the naming convention is to suffix the âchoiceâ term with a number, e.g.&nbsp;<code class="docutils literal notranslate"><span class="pre">TradeIdentifier_choice1</span></code> and <code class="docutils literal notranslate"><span class="pre">TradeIdentifier_choice2</span></code>.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">ContractIdentifier</span> <span class="kd">extends</span> <span class="n">Identifier</span> <span class="o">&lt;</span><span class="s">&quot;A class defining a trade identifier issued by the indicated party. The CDM doesn&#39;t extends the base class PartyAndAccountReference because of the choice logic with the issuer element.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">TradeIdentifier</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span><span class="o">]</span>
 <span class="n">partyReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">reference</span> <span class="o">&lt;</span><span class="s">&quot;Reference to a party.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">partyReference</span><span class="o">]</span>
 <span class="n">accountReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">reference</span> <span class="o">&lt;</span><span class="s">&quot;Reference to an account.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">accountReference</span><span class="o">]</span>
<span class="o">}</span>

<span class="n">choice</span> <span class="n">rule</span> <span class="n">ContractIdentifier_choice</span> <span class="o">&lt;</span><span class="s">&quot;Choice rule to represent an FpML choice construct.&quot;</span><span class="o">&gt;</span>
 <span class="k">for</span> <span class="n">ContractIdentifier</span> <span class="n">required</span> <span class="n">choice</span> <span class="n">between</span>
 <span class="n">issuer</span> <span class="n">and</span> <span class="n">partyReference</span>
</pre></div>
</div>
<p>The choice constraint can either be <strong>required</strong> (implying that exactly one of the attributes needs to be present) or <strong>optional</strong> (implying that at most one of the attributes needs to be present).</p>
<p>While most of the choice rules have two attributes, there is no limit to the number of attributes associated with itâ¦ within the limit of the number of attributes associated with the class at stake. <code class="docutils literal notranslate"><span class="pre">CashSettlement_choice</span></code> is a good illustration of this.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">choice</span> <span class="n">rule</span> <span class="n">CashSettlement_choice</span> <span class="o">&lt;</span><span class="s">&quot;Choice rule to represent an FpML choice construct.&quot;</span><span class="o">&gt;</span>
 <span class="k">for</span> <span class="n">CashSettlement</span> <span class="n">optional</span> <span class="n">choice</span> <span class="n">between</span>
 <span class="n">cashPriceMethod</span> <span class="n">and</span> <span class="n">cashPriceAlternateMethod</span> <span class="n">and</span> <span class="n">parYieldCurveAdjustedMethod</span> <span class="n">and</span> <span class="n">zeroCouponYieldAdjustedMethod</span>
 <span class="n">and</span> <span class="n">parYieldCurveUnadjustedMethod</span> <span class="n">and</span> <span class="n">crossCurrencyMethod</span> <span class="n">and</span> <span class="n">collateralizedCashPriceMethod</span>
</pre></div>
</div>
<p>Members of a choice rule need to have their lower cardinality set to 0, something which is enforced by a validation rule.</p>
</div>
<div class="section" id="one-of-syntax-as-a-complement-to-the-choice-rule">
<h4>One of syntax as a complement to the choice rule<a class="headerlink" href="#one-of-syntax-as-a-complement-to-the-choice-rule" title="Permalink to this headline">Â¶</a></h4>
<p>In the case where all the attributes of a given class are subject to a choice logic, Rosetta provides the ability to qualify the class information with the <code class="docutils literal notranslate"><span class="pre">one</span> <span class="pre">of</span></code> qualifier. This feature is illustrated by the <code class="docutils literal notranslate"><span class="pre">BondOptionStrike</span></code> class.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">BondOptionStrike</span> <span class="n">one</span> <span class="n">of</span> <span class="o">&lt;</span><span class="s">&quot;A class to specify the strike of a bond or convertible bond option.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">BondOptionStrike</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">referenceSwapCurve</span> <span class="nf">ReferenceSwapCurve</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The strike of an option when expressed by reference to a swap curve. (Typically the case for a convertible bond option.)&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">referenceSwapCurve</span><span class="o">]</span>
 <span class="n">price</span> <span class="nf">OptionStrike</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">price</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="aliases">
<h3>Aliases<a class="headerlink" href="#aliases" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id9">
<h4>Purpose<a class="headerlink" href="#id9" title="Permalink to this headline">Â¶</a></h4>
<p>Two related considerations stand behind the introduction of aliases as part of the Rosetta syntax:
* The recognition that model tree expressions can be cumbersome at time and hence may contradict the primary goals of clarity and legibility.
* Aliases can be reused across the various modeling artefacts that make use of those, i.e. currently data rule, event and product qualification, calculation and projection rules (note that this latter artefact is not currently uased as part of the CDM).</p>
</div>
<div class="section" id="id10">
<h4>Syntax<a class="headerlink" href="#id10" title="Permalink to this headline">Â¶</a></h4>
<p>The alias syntax is straightforward: <code class="docutils literal notranslate"><span class="pre">alias</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;Rosetta</span> <span class="pre">expression&gt;</span></code>.</p>
<p>The alias name needs to be unique across the product and event qualifications, the classes and the aliases, and validation logic is in place to enforce this. The naming convention is to have one CamelCased word, instead of a composite name as for the Rosetta rules, with implied meaning.</p>
<p>The below snippet presents an exemple of such alias and its use as part of an event qualification.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">alias</span> <span class="n">contractBeforeQuantityChange</span>
  <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="o">-&gt;</span> <span class="n">before</span> <span class="o">-&gt;</span> <span class="n">contract</span>
 <span class="n">or</span> <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="o">-&gt;</span> <span class="n">before</span> <span class="o">-&gt;</span> <span class="n">contractReference</span>

<span class="n">isEvent</span> <span class="n">Compression</span> <span class="o">&lt;</span><span class="s">&quot;The qualification of a compression event from the fact that (i) the intent is Compression when specified, (ii) the quantity change primitive exists, (iii) and there are multiple contracts (or contract references) specified in the before state.&quot;</span><span class="o">&gt;</span>
  <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">intent</span> <span class="n">when</span> <span class="n">present</span> <span class="o">=</span> <span class="n">IntentEnum</span><span class="o">.</span><span class="na">Compression</span>
  <span class="n">and</span> <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="n">exists</span>
  <span class="n">and</span> <span class="n">contractBeforeQuantityChange</span> <span class="n">multiple</span> <span class="n">exists</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="mapping-artefacts">
<h2>Mapping Artefacts<a class="headerlink" href="#mapping-artefacts" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="synonyms">
<h3>Synonyms<a class="headerlink" href="#synonyms" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id11">
<h4>Purpose<a class="headerlink" href="#id11" title="Permalink to this headline">Â¶</a></h4>
<p>Synonym is the baseline building block in the relationship between the CDM and alternative data representations, whether those are open standards or proprietary data representations. It can be complemented by relevant mapping logic when the relationship is not a one-to-one or is conditional.</p>
<p>Synonyms can be associated to all four sets of Rosetta data modelling artefacts:</p>
<ul class="simple">
<li>Classes</li>
<li>Attributes</li>
<li>Enumerations</li>
<li>Enumeration values</li>
</ul>
<p>There is no limit to the number of synonyms that can be associated with each of those artefacts, and there can even be several synonyms for a given data source (e.g. in the case of a conditional mapping).</p>
</div>
<div class="section" id="id12">
<h4>Syntax<a class="headerlink" href="#id12" title="Permalink to this headline">Â¶</a></h4>
<p>The baseline synonym syntax has two components:</p>
<ul class="simple">
<li>The <strong>source</strong>, whose possible values are controlled by the grammar and correspond to the various standards and protocols which are subject to associations as part of Rosetta (e.g.&nbsp;<code class="docutils literal notranslate"><span class="pre">FpML</span></code>, <code class="docutils literal notranslate"><span class="pre">ISO</span> <span class="pre">20022</span></code>).</li>
<li>The <strong>value</strong>, which is of type <code class="docutils literal notranslate"><span class="pre">identifier</span></code>.</li>
</ul>
<p>Example:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">[synonym</span> <span class="pre">FpML</span> <span class="pre">value</span> <span class="pre">accountTypeScheme]</span></code></div></blockquote>
<p>A further set of attributes can be associated with a synonym, to address specific use cases:</p>
<ul class="simple">
<li>A <strong>tag</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">[synonym</span> <span class="pre">FIX</span> <span class="pre">value</span> <span class="pre">AccountType</span> <span class="pre">tag</span> <span class="pre">581]</span></code>) or a <strong>componentID</strong> (e.g. <code class="docutils literal notranslate"><span class="pre">[synonym</span> <span class="pre">FIX</span> <span class="pre">value</span> <span class="pre">RateSource</span> <span class="pre">componentID</span> <span class="pre">1062]</span></code>) can be associated to a synonym value. Those are of type <code class="docutils literal notranslate"><span class="pre">integer</span></code>. The purpose here is to properly represent the FIX standard. It should be noted that the ability to set those attributes is not restricted to the source value FIX, because it is expected that further protocol sources will actually be variations of the FIX standard. (Note: this is not a relevant use case as it relates to the current CDM model, which scope is limited to the equivalence with the FpML standard.)</li>
<li>A <strong>mapping logic</strong> can be associated to a synonym to address the case where the relationship between the CDM data element and that synonym is subject to a logic of some sort.</li>
<li>A <strong>definition</strong> (of type <code class="docutils literal notranslate"><span class="pre">string</span></code>) can be associated with the enumeration value synonyms, as noted above, the purpose being to provide a more explicit reference to the FIX enumeration values, which are specified through a single digit or letter, which value is then positioned as a prefix to the associated definition.</li>
<li>A <strong>pathExpression</strong> which purpose is allows mapping in cases where the data is nested in different ways between the respective models.  The <code class="docutils literal notranslate"><span class="pre">CalculationPeriodDates</span></code> is a good illustration of such cases, as it is a widely used building block that is leveraged from the FpML standard:</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">CalculationPeriodDates</span> <span class="o">&lt;</span><span class="s">&quot;A class defining the parameters used to generate the calculation period dates schedule, including the specification of any initial or final stub calculation periods. A calculation perod schedule consists of an optional initial stub calculation period, one or more regular calculation periods and an optional final stub calculation period. In the absence of any initial or final stub calculation periods, the regular part of the calculation period schedule is assumed to be between the effective date and the termination date. No implicit stubs are allowed, i.e. stubs must be explicitly specified using an appropriate combination of firstPeriodStateDate, firstRegularPeriodStartDate and lastRegularPeriodEndDate..&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">CalculationPeriodDates</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">anchor</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span> <span class="n">pathExpression</span> <span class="s">&quot;calculationPeriodDates&quot;</span><span class="o">]</span>
 <span class="n">effectiveDate</span> <span class="nf">AdjustableDate</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The first day of the term of the trade. This day may be subject to adjustment in accordance with a business day convention.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">effectiveDate</span> <span class="n">pathExpression</span> <span class="s">&quot;calculationPeriodDates&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">effectiveDate</span><span class="o">]</span>
 <span class="n">relativeEffectiveDate</span> <span class="nf">AdjustedRelativeDateOffset</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;Defines the effective date.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">relativeEffectiveDate</span> <span class="n">pathExpression</span> <span class="s">&quot;calculationPeriodDates&quot;</span><span class="o">]</span>
 <span class="n">terminationDate</span> <span class="nf">AdjustableDate</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The last day of the terms of the trade. This date may be subject to adjustments in accordance with the business day convention.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">terminationDate</span> <span class="n">pathExpression</span> <span class="s">&quot;calculationPeriodDates&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">scheduledTerminationDate</span><span class="o">]</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="mapping-logic">
<h3>Mapping Logic<a class="headerlink" href="#mapping-logic" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id13">
<h4>Purpose<a class="headerlink" href="#id13" title="Permalink to this headline">Â¶</a></h4>
<p>There are cases where the rerlationship between the marketplace standards and protocols and their relation to the CDM is not one-to-one or is conditional.</p>
<p>Hence, the need to complement the synonyms with a syntax that provides the ability to express a mapping logic in a mannet that provides a good balance between flexibility and legibility.</p>
</div>
<div class="section" id="id14">
<h4>Syntax<a class="headerlink" href="#id14" title="Permalink to this headline">Â¶</a></h4>
<p>The mapping logic differs from the data rule, choice rule and calculation syntax in that its syntax is not expressed as a stand-alone block with a qualifier prefix such as <code class="docutils literal notranslate"><span class="pre">rule</span></code>. Rather, the mapping rule is positioned as an extension to the synonym expression, and each of the mapping expressions (several mapping expressions can be associated with a given synonym) is prefixed with the <code class="docutils literal notranslate"><span class="pre">set</span></code> qualifier, followed by the name of the Rosetta attribute to which the synonym is being mapped to.</p>
<p>The mapping syntax is composed of two (optional) expressions: a <strong>mapping value</strong> that is prefixed with <code class="docutils literal notranslate"><span class="pre">to</span></code>, which purpose is to provide the ability to map a specific value that is distinct from the one originating from the source document, and a <strong>conditional expression</strong> that is prefixed with <code class="docutils literal notranslate"><span class="pre">when</span></code>, which purpose is to associate conditional logic to the mapping expression.</p>
<p>The mapping logic associated with the below <code class="docutils literal notranslate"><span class="pre">action</span></code> attribute provides a good illustration of such logic.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Event</span> <span class="n">rosettaKey</span>
<span class="o">{</span>
 <span class="n">messageInformation</span> <span class="nf">MessageInformation</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
 <span class="n">timestamp</span> <span class="nf">EventTimestamp</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">timestamp</span><span class="o">]</span>
 <span class="n">eventIdentifier</span> <span class="nf">Identifier</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">);</span>
 <span class="n">eventQualifier</span> <span class="nf">eventType</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The CDM event qualifier, which corresponds to the outcome of the isEvent qualification logic. This value is derived by the CDM from the event features.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">eventIdentifier</span><span class="o">]</span>
 <span class="n">eventDate</span> <span class="nf">date</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">eventDate</span><span class="o">]</span>
 <span class="n">effectiveDate</span> <span class="nf">date</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">effectiveDate</span><span class="o">]</span>
 <span class="n">action</span> <span class="nf">ActionEnum</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;Specifies whether the event is a new, a correction or a cancellation.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">isCorrection</span>
     <span class="n">set</span> <span class="n">action</span> <span class="n">to</span> <span class="n">ActionEnum</span><span class="o">.</span><span class="na">New</span> <span class="n">when</span> <span class="n">False</span><span class="o">,</span>
     <span class="n">set</span> <span class="n">action</span> <span class="n">to</span> <span class="n">ActionEnum</span><span class="o">.</span><span class="na">Correct</span> <span class="n">when</span> <span class="n">True</span><span class="o">]</span>
 <span class="n">intent</span> <span class="nf">IntentEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">intent</span><span class="o">]</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="data-validation-artefacts">
<h2>Data Validation Artefacts<a class="headerlink" href="#data-validation-artefacts" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="data-rules">
<h3>Data Rules<a class="headerlink" href="#data-rules" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id15">
<h4>Purpose<a class="headerlink" href="#id15" title="Permalink to this headline">Â¶</a></h4>
<p>Data rules are the primary channel through which data validation is enforced as part of Rosetta.</p>
<p>A good initial illustration of such role relates to how data constraints specified as part of the FpML documentation are expressed as part of those rules â and hence become part of the executable code case that is generated from the model.</p>
<p>As an example, the <code class="docutils literal notranslate"><span class="pre">FpML_ird_61</span></code> data rule implements the <strong>FpML ird validation rule #61</strong>, which states that if the notional step schedule is absent, then the initial value of the notional schedule must not be null. While at present the FpML logic needs to be evaluated and transcribed into code by the relevant teams (with the implication that, more often than not, such logic is actually not enforced), its programmatic implementation is available alongside a legible view of it as part of Rosetta.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">NotionalSchedule</span> <span class="o">&lt;</span><span class="s">&quot;A class specifying defining the notional amount or notional amount schedule associated with a contractual product. The notional schedule will be captured explicitly, specifying the dates that the notional changes and the outstanding notional amount that applies from that date. A parametric representation of the rules defining the notional step schedule can optionally be included.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">Notional</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span><span class="o">]</span>
 <span class="n">notionalStepSchedule</span> <span class="nf">NonNegativeAmountSchedule</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The notional amount or notional amount schedule expressed as explicit outstanding notional amounts and dates. In the case of a schedule, the step dates may be subject to adjustments in accordance with any adjustments specified in calculationPeriodDatesAdjustments.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">notionalStepSchedule</span><span class="o">]</span>
 <span class="n">notionalStepParameters</span> <span class="nf">NotionalStepRule</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;A parametric representation of the notional step schedule, i.e. parameters used to generate the notional schedule.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">notionalStepParameters</span><span class="o">]</span>
<span class="o">}</span>

<span class="n">data</span> <span class="n">rule</span> <span class="n">FpML_ird_61</span> <span class="o">&lt;</span><span class="s">&quot;FpML validation rule ird-61 - Context: NonNegativeSchedule (complex type). If step does not exist, then initialValue must not be equal to 0.&quot;</span><span class="o">&gt;</span>
  <span class="n">when</span> <span class="n">NotionalSchedule</span> <span class="o">-&gt;</span> <span class="n">notionalStepSchedule</span> <span class="o">-&gt;</span> <span class="n">step</span> <span class="n">is</span> <span class="n">absent</span>
  <span class="n">then</span> <span class="n">NotionalSchedule</span> <span class="o">-&gt;</span> <span class="n">notionalStepSchedule</span> <span class="o">-&gt;</span> <span class="n">initialValue</span> <span class="o">&lt;&gt;</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>(<strong>Note</strong>: the above <code class="docutils literal notranslate"><span class="pre">0.0</span></code> notation is meant to denote the fact that the <code class="docutils literal notranslate"><span class="pre">initialValue</span></code> attribute is of type <code class="docutils literal notranslate"><span class="pre">number</span></code>.)</p>
</div>
<div class="section" id="id16">
<h4>Syntax<a class="headerlink" href="#id16" title="Permalink to this headline">Â¶</a></h4>
<p>Data rules apply to classes and associated attributes.</p>
<p>Their name needs to be unique across the model, and the naming convention often used is in the form of <code class="docutils literal notranslate"><span class="pre">&lt;className&gt;_&lt;attributeName&gt;</span></code> where attributeName refers to the attribute to which the rule applies. If the data rule applies to several attributes, it is appropriate to have a naming in the form of <code class="docutils literal notranslate"><span class="pre">&lt;className&gt;_&lt;attributeName1&gt;_&lt;attributeName2&gt;</span></code>.</p>
<p>Variations from this naming convention are needed, as in the case of the data rules that implement FpML data validation rules, the <code class="docutils literal notranslate"><span class="pre">FpML_rule_#</span></code> convention has been used.</p>
<p>Another variation example of this naming convention is <code class="docutils literal notranslate"><span class="pre">CalculationPeriodFrequency_rollConvention_M_Y</span></code>, which sets constraints with respect to the enumeration values applicable to one attribute as a function of the values applicable to another one; as a result, the rule name suffixes the attribute which is subject to that logic with a hint about the conditional terms. This provides an appropriate differenciation with the two other data rules that apply to the <code class="docutils literal notranslate"><span class="pre">CalculationPeriodFrequency</span></code> class, as illustrated below.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="n">rule</span> <span class="n">CalculationPeriodFrequency_rollConvention_M_Y</span> <span class="o">&lt;</span><span class="s">&quot;FpML validation rule ird-57 - Context: CalculationPeriodFrequency. [period eq (&#39;M&#39;, &#39;Y&#39;)] not(rollConvention = (&#39;NONE&#39;, &#39;SFE&#39;, &#39;MON&#39;, &#39;TUE&#39;, &#39;WED&#39;, &#39;THU&#39;, &#39;FRI&#39;, &#39;SAT&#39;,&#39;SUN&#39;)).&quot;</span><span class="o">&gt;</span>
 <span class="n">when</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">period</span> <span class="o">=</span> <span class="n">PeriodExtendedEnum</span><span class="o">.</span><span class="na">M</span> <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">period</span> <span class="o">=</span> <span class="n">PeriodExtendedEnum</span><span class="o">.</span><span class="na">Y</span>
 <span class="n">then</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">NONE</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">SFE</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">MON</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">TUE</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">WED</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">THU</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">FRI</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">SAT</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">&lt;&gt;</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">SUN</span>

<span class="n">data</span> <span class="n">rule</span> <span class="n">CalculationPeriodFrequency_rollConvention_W</span> <span class="o">&lt;</span><span class="s">&quot;FpML validation rule ird-58 - Context: CalculationPeriodFrequency (complex type). When the period is &#39;W&#39;, the rollConvention must be a week day, &#39;SFE&#39; or &#39;NONE&#39;.&quot;</span><span class="o">&gt;</span>
 <span class="n">when</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">period</span> <span class="o">=</span> <span class="n">PeriodExtendedEnum</span><span class="o">.</span><span class="na">W</span>
 <span class="n">then</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">NONE</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">SFE</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">MON</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">TUE</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">WED</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">THU</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">FRI</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">SAT</span>
  <span class="n">or</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">SUN</span>

<span class="n">data</span> <span class="n">rule</span> <span class="n">CalculationPeriodFrequency_rollConvention_T</span> <span class="o">&lt;</span><span class="s">&quot;FpML validation rule ird-60 - Context: CalculationPeriodFrequency (complex type). When the period is &#39;T&#39;, the rollConvention must be &#39;NONE&#39;.&quot;</span><span class="o">&gt;</span>
 <span class="n">when</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">period</span> <span class="o">=</span> <span class="n">PeriodExtendedEnum</span><span class="o">.</span><span class="na">T</span>
 <span class="n">then</span> <span class="n">CalculationPeriodFrequency</span> <span class="o">-&gt;</span> <span class="n">rollConvention</span> <span class="o">=</span> <span class="n">RollConventionEnum</span><span class="o">.</span><span class="na">NONE</span>
</pre></div>
</div>
<p>The main data rule syntax is in the form of <code class="docutils literal notranslate"><span class="pre">when</span> <span class="pre">&lt;Rosetta</span> <span class="pre">expression&gt;</span> <span class="pre">then</span> <span class="pre">&lt;Rosetta</span> <span class="pre">expression&gt;</span></code>.</p>
<p>Here are a set of relevant examples of this data rule syntax:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">CalculationPeriodDates_firstCompoundingPeriodEndDate</span></code> combines three Boolean assertions.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="n">rule</span> <span class="n">CalculationPeriodDates_firstCompoundingPeriodEndDate</span> <span class="o">&lt;</span><span class="s">&quot;FpML specifies that the firstCompoundingPeriodEndDate must only be specified when the compounding method is specified and not equal to a value of None.&quot;</span><span class="o">&gt;</span>
 <span class="n">when</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">compoundingMethod</span> <span class="n">is</span> <span class="n">absent</span>
  <span class="n">or</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">compoundingMethod</span> <span class="o">=</span> <span class="n">CompoundingMethodEnum</span><span class="o">.</span><span class="na">None</span>
 <span class="n">then</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">calculationPeriodDates</span> <span class="o">-&gt;</span> <span class="n">firstCompoundingPeriodEndDate</span> <span class="n">is</span> <span class="n">absent</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">CalculationPeriod_calculationPeriodNumberOfDays</span></code> involves an operator.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="n">rule</span> <span class="n">CalculationPeriod_calculationPeriodNumberOfDays</span> <span class="o">&lt;</span><span class="s">&quot;FpML specifies calculationPeriodNumberOfDays as a positive integer.&quot;</span><span class="o">&gt;</span>
 <span class="n">when</span> <span class="n">PaymentCalculationPeriod</span> <span class="o">-&gt;</span> <span class="n">calculationPeriod</span> <span class="o">-&gt;</span> <span class="n">calculationPeriodNumberOfDays</span> <span class="n">exists</span>
 <span class="n">then</span> <span class="n">PaymentCalculationPeriod</span> <span class="o">-&gt;</span> <span class="n">calculationPeriod</span> <span class="o">-&gt;</span> <span class="n">calculationPeriodNumberOfDays</span> <span class="o">&gt;=</span> <span class="mi">0</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">CalculationPeriodDates_firstPeriodStartDate_stubPeriodType</span></code> involves three assertions as part of the <code class="docutils literal notranslate"><span class="pre">when</span></code> statement, two of which consist in evaluating Boolean values.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="n">rule</span> <span class="n">CalculationPeriodDates_firstPeriodStartDate_stubPeriodType</span> <span class="o">&lt;</span><span class="s">&quot;FpML specifies that the firstRegularPeriodStartDate must only be specified if there is an initial stub calculation period.&quot;</span><span class="o">&gt;</span>
 <span class="n">when</span> <span class="n">CalculationPeriodDates</span> <span class="o">-&gt;</span> <span class="n">stubPeriodType</span> <span class="n">is</span> <span class="n">absent</span>
  <span class="nf">or</span> <span class="o">(</span> <span class="n">CalculationPeriodDates</span> <span class="o">-&gt;</span> <span class="n">stubPeriodType</span> <span class="o">&lt;&gt;</span> <span class="n">StubPeriodTypeEnum</span><span class="o">.</span><span class="na">ShortInitial</span>
  <span class="n">and</span> <span class="n">CalculationPeriodDates</span> <span class="o">-&gt;</span> <span class="n">stubPeriodType</span> <span class="o">&lt;&gt;</span> <span class="n">StubPeriodTypeEnum</span><span class="o">.</span><span class="na">LongInitial</span> <span class="o">)</span>
 <span class="n">then</span> <span class="n">CalculationPeriodDates</span> <span class="o">-&gt;</span> <span class="n">firstRegularPeriodStartDate</span> <span class="n">must</span> <span class="n">be</span> <span class="n">absent</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">FpML_cd_7</span></code> makes use of parentheses for the purpose of supporting nested assertions.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="n">rule</span> <span class="n">FpML_cd_7</span> <span class="o">&lt;</span><span class="s">&quot;FpML validation rule cd-7 - If condition LongForm is true, then effectiveDate/dateAdjustments exists.&quot;</span><span class="o">&gt;</span>
 <span class="n">when</span> <span class="o">(</span> <span class="n">Contract</span> <span class="o">-&gt;</span> <span class="n">documentation</span> <span class="o">-&gt;</span> <span class="n">masterConfirmation</span> <span class="n">or</span> <span class="n">Contract</span> <span class="o">-&gt;</span> <span class="n">documentation</span> <span class="o">-&gt;</span> <span class="n">contractualMatrix</span> <span class="o">)</span> <span class="n">is</span> <span class="n">absent</span>
 <span class="n">and</span> <span class="n">Contract</span> <span class="o">-&gt;</span> <span class="n">contractualProduct</span> <span class="o">-&gt;</span> <span class="n">economicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">creditDefaultPayout</span> <span class="o">-&gt;</span> <span class="n">generalTerms</span> <span class="o">-&gt;</span> <span class="n">referenceInformation</span> <span class="n">exists</span>
 <span class="n">then</span> <span class="n">Contract</span> <span class="o">-&gt;</span> <span class="n">contractualProduct</span> <span class="o">-&gt;</span> <span class="n">economicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">interestRatePayout</span> <span class="o">-&gt;</span> <span class="n">calculationPeriodDates</span> <span class="o">-&gt;</span> <span class="n">effectiveDate</span> <span class="o">-&gt;</span> <span class="n">dateAdjustments</span> <span class="n">exists</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="object-qualification-artefacts">
<h2>Object Qualification Artefacts<a class="headerlink" href="#object-qualification-artefacts" title="Permalink to this headline">Â¶</a></h2>
<p>The CDM modelling approach consists in inferring the product and event qualification from their relevant attributes, rather than qualifying those upfront. As a result, the Rosetta syntax has been adjusted to meet this requirement, with slight variations in the implementation across those two use cases.</p>
<p>The CDM Model section of this documentation details the positioning of those product and event qualification artefacts as part of the CDM and their representation as part of the associated object instanciations.</p>
<div class="section" id="product-qualification">
<h3>Product Qualification<a class="headerlink" href="#product-qualification" title="Permalink to this headline">Â¶</a></h3>
<p>15 interest rate derivative products have so been qualified as part of the CDM, leveraging the ISDA taxonomy approach. Credit derivatives have not yet been qualified because their ISDA taxonomy is based upon the underlying transaction type, instead of the product features as for the interest rate swaps. Follow-up is in progress with the ISDA Credit Group to evaluate whether an alternative product qualification could be developed that would leverage the approach adopted for interest rate derivatives.</p>
<div class="section" id="id17">
<h4>Purpose<a class="headerlink" href="#id17" title="Permalink to this headline">Â¶</a></h4>
<p>The product qualification leverages the <strong>alias</strong> syntax presented earlier in this documentation, by qualifying a product from its economic terms, those latter being expressed through a set of assertions associated with modelling components.</p>
</div>
<div class="section" id="id18">
<h4>Syntax<a class="headerlink" href="#id18" title="Permalink to this headline">Â¶</a></h4>
<p>The product qualification syntax is as follows: <code class="docutils literal notranslate"><span class="pre">isProduct</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;Rosetta</span> <span class="pre">expression&gt;</span></code>.</p>
<p>The product name needs to be unique across the product and event qualifications, the classes and the aliases, and validation logic is in place to enforce this. The naming convention is to have one CamelCased word.</p>
<p>The CDM makes use of the ISDA taxonomy V2.0 leaf level to qualify the event.  The synonymity with the ISDA taxonomy V1.0 has been systematically indicated as part of the model upon request from CDM group participants, who pointed out that a number of them use it internally.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">isProduct</span> <span class="n">InterestRate_IRSwap_FixedFloat</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">ISDA_Taxonomy_v1</span> <span class="n">value</span> <span class="n">InterestRate_IRSwap_FixedFloat</span><span class="o">]</span>
 <span class="n">EconomicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">interestRatePayout</span> <span class="o">-&gt;</span> <span class="n">interestRate</span> <span class="o">-&gt;</span> <span class="n">fixedRate</span> <span class="n">exists</span>
 <span class="n">and</span> <span class="n">EconomicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">interestRatePayout</span> <span class="o">-&gt;</span> <span class="n">interestRate</span> <span class="o">-&gt;</span> <span class="n">floatingRate</span> <span class="n">exists</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="event-qualification">
<h3>Event Qualification<a class="headerlink" href="#event-qualification" title="Permalink to this headline">Â¶</a></h3>
<p>11 events have currently been qualified as part of the CDM.</p>
<div class="section" id="id19">
<h4>Purpose<a class="headerlink" href="#id19" title="Permalink to this headline">Â¶</a></h4>
<p>Similar to the product qualification syntax, the purpose of the event qualifier is to qualify a product from the existence of the a set of modelling attributes.</p>
</div>
<div class="section" id="id20">
<h4>Syntax<a class="headerlink" href="#id20" title="Permalink to this headline">Â¶</a></h4>
<p>The event qualification syntax is similar to the product and the alias, the difference being that it is possible to associate a set of data rules to a: <code class="docutils literal notranslate"><span class="pre">isProduct</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;Rosetta</span> <span class="pre">expression&gt;</span> <span class="pre">&lt;Data</span> <span class="pre">rule&gt;</span></code>.</p>
<p>The event name needs to be unique across the product and event qualifications, the classes and the aliases, and validation logic is in place to enforce this. The naming convention is to have one CamelCased word.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Compression</span></code> illustrates quite well how the syntax qualifies this event by requiring that three conditions be met:</p>
<ul class="simple">
<li>When specified, the value associated with the <code class="docutils literal notranslate"><span class="pre">intent</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">Event</span></code> class must be <code class="docutils literal notranslate"><span class="pre">Compression</span></code>;</li>
<li>The quantity change primitive must exist;</li>
<li>There are multiple contracts (or contract references) specified in the <code class="docutils literal notranslate"><span class="pre">before</span></code> state. This latter argument makes use of the <code class="docutils literal notranslate"><span class="pre">contractBeforeQuantityChange</span></code> alias.</li>
</ul>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">isEvent</span> <span class="n">Compression</span> <span class="o">&lt;</span><span class="s">&quot;The qualification of a compression event from the fact that (i) the intent is Compression when specified, (ii) the quantity change primitive exists, (iii) and there are multiple contracts (or contract references) specified in the before state.&quot;</span><span class="o">&gt;</span>
 <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">intent</span> <span class="n">when</span> <span class="n">present</span> <span class="o">=</span> <span class="n">IntentEnum</span><span class="o">.</span><span class="na">Compression</span>
 <span class="n">and</span> <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="n">exists</span>
 <span class="n">and</span> <span class="n">contractBeforeQuantityChange</span> <span class="n">multiple</span> <span class="n">exists</span>

<span class="n">alias</span> <span class="n">contractBeforeQuantityChange</span>
 <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="o">-&gt;</span> <span class="n">before</span> <span class="o">-&gt;</span> <span class="n">contract</span>
 <span class="n">or</span> <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="o">-&gt;</span> <span class="n">before</span> <span class="o">-&gt;</span> <span class="n">contractReference</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="calculation-artefacts">
<h2>Calculation Artefacts<a class="headerlink" href="#calculation-artefacts" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="id21">
<h3>Purpose<a class="headerlink" href="#id21" title="Permalink to this headline">Â¶</a></h3>
<p>One of the objectives of the CDM Initial Phase has been to express in a machine executable format some of the ISDA Definitions as a way to confirm the extent to which this digital CDM solution can be used.</p>
<p>The ISDA 2006 definitions of the <strong>Fixed Amount</strong> and <strong>Floating Amount</strong> have been used as an initial scope.</p>
<p>To this effect, the grammar component of the Rosetta workbench has been extended as a way to express a syntax that can support such expressions.</p>
</div>
<div class="section" id="id22">
<h3>Syntax<a class="headerlink" href="#id22" title="Permalink to this headline">Â¶</a></h3>
<p>The calculation syntax has three components: the <strong>calculation</strong> itself, the <strong>argument</strong> used as an input to that calculation and (possibly) associated <strong>function</strong>.</p>
<p>The application of this syntax to the <code class="docutils literal notranslate"><span class="pre">ACT/365.FIXED</span></code> ISDA day count fraction definition provides a good illustration of that syntax:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">calculation</span> <span class="n">DayCountFractionEnum</span><span class="o">.</span><span class="na">_30E_360</span> <span class="o">&lt;</span><span class="s">&quot;2006 ISDA Definition Article 4 section 4.16(g): If &#39;30E/360&#39; or &#39;Eurobond Basis&#39; is specified, the number of days in the Calculation Period or Compounding Period in respect of which payment is being made divided by 360, calculated on a formula basis as follows:[[360 x (Y2 - Y1)] + [30 x (M2 - M1)] + (D2 - D1)]/360&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
  <span class="n">number</span><span class="o">:</span> <span class="o">(</span><span class="mi">360</span> <span class="o">*</span> <span class="o">(</span><span class="n">endYear</span> <span class="o">-</span> <span class="n">startYear</span><span class="o">)</span> <span class="o">+</span> <span class="mi">30</span> <span class="o">*</span> <span class="o">(</span><span class="n">endMonth</span> <span class="o">-</span> <span class="n">startMonth</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">endDay</span> <span class="o">-</span> <span class="n">startDay</span><span class="o">))</span> <span class="o">/</span> <span class="mi">360</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">arguments</span> <span class="n">DayCountFractionEnum</span><span class="o">.</span><span class="na">_30E_360</span> <span class="o">&lt;</span><span class="s">&quot;2006 ISDA Definition Article 4 section 4.16(g). &#39;Y1&#39; is the year, expressed as a number, in which the first day of the Calculation Period or Compounding Period falls; &#39;Y2&#39; is the year, expressed as a number, in which the day immediately following the last day included in the Calculation Period or Compounding Period falls; &#39;M1&#39; is the calendar month, expressed as a number, in which the first day of the Calculation Period or Compounding Period falls; &#39;M2&#39; is the calendar month, expressed as a number, in which the day immediately following the last day included in the Calculation Period or Compounding Period falls; &#39;D1&#39; is the first calendar day, expressed as a number, of the Calculation Period or Compounding Period, unless such number would be 31, in which case D1 will be 30; and &#39;D2&#39; is the calendar day, expressed as a number, immediately following the last day included in the Calculation Period or Compounding Period, unless such number would be 31, in which case D2 will be 30.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">alias</span> <span class="n">period</span> <span class="nf">CalculationPeriod</span><span class="o">(</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">calculationPeriodDates</span> <span class="o">)</span>

 <span class="n">endYear</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">endDate</span> <span class="o">-&gt;</span> <span class="n">year</span>
 <span class="n">startYear</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">startDate</span> <span class="o">-&gt;</span> <span class="n">year</span>
 <span class="n">endMonth</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">endDate</span> <span class="o">-&gt;</span> <span class="n">month</span>
 <span class="n">startMonth</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">startDate</span> <span class="o">-&gt;</span> <span class="n">month</span>
 <span class="n">startDay</span> <span class="o">:</span> <span class="n">is</span> <span class="nf">Min</span><span class="o">(</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">startDate</span> <span class="o">-&gt;</span> <span class="n">day</span><span class="o">,</span> <span class="mi">30</span> <span class="o">)</span>
 <span class="n">endDay</span> <span class="o">:</span> <span class="n">is</span> <span class="nf">Min</span><span class="o">(</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">endDate</span> <span class="o">-&gt;</span> <span class="n">day</span><span class="o">,</span> <span class="mi">30</span> <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="nf">ResolveRateIndex</span><span class="o">(</span> <span class="n">index</span> <span class="n">FloatingRateIndexEnum</span> <span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The function to specify that the floating rate index enumeration will be expressed as a number once the rate is observed.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">rate</span> <span class="n">number</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="cdm-model">
<h1>CDM Model<a class="headerlink" href="#cdm-model" title="Permalink to this headline">Â¶</a></h1>
<p>This section presents an outline of the <strong>four dimensions of the CDM model representation</strong>:</p>
<ul class="simple">
<li>products</li>
<li>events</li>
<li>interest calcution</li>
<li>reference data</li>
</ul>
<div class="section" id="product-model">
<h2>Product Model<a class="headerlink" href="#product-model" title="Permalink to this headline">Â¶</a></h2>
<p>CDM provides a composite product model whereby:</p>
<ul class="simple">
<li>The economic terms are specified by composition, leveraging the FpML building blocks to the extent possible while also looking for further consistency and simplicity whenever possible;</li>
<li>The product qualification is inferred from those economic terms.</li>
</ul>
<p>The scope of the CDM 1.0 is limited to contractual derivative products, and listed products, loans and mortgages are represented only in relation to the features needed to position those as underlyers of such derivative products.</p>
<div class="section" id="contractual-derivative-products">
<h3>Contractual Derivative Products<a class="headerlink" href="#contractual-derivative-products" title="Permalink to this headline">Â¶</a></h3>
<p>The scope of products implemented as part of CDM 1.0 is as follows:</p>
<ul class="simple">
<li>Interest rate derivatives:<ul>
<li>Interest rate swaps (incl. cross-currency swaps, non-deliverable swaps, basis swaps, swaps with  non-regular periods, â¦)</li>
<li>Swaptions</li>
<li>Bond and convertible bond options</li>
</ul>
</li>
<li>Credit derivatives:<ul>
<li>Credit default swaps (incl. baskets, tranche, swaps with mortgage and loans underlyers, â¦)</li>
<li>Options on credit default swaps</li>
</ul>
</li>
</ul>
<p>The below sections detail the key features of this product implementation: contract representation, economic terms component and how the product qualification is inferred from those economic terms.</p>
<div class="section" id="post-execution-the-contract">
<h4>Post-execution: the contract<a class="headerlink" href="#post-execution-the-contract" title="Permalink to this headline">Â¶</a></h4>
<p>Contractual products are bilateral contracts between two parties, which terms are specified at trade inception and apply throughout the life of the contract. Contractual products are fungible only under specific terms (e.g.&nbsp;existence of a close-out netting agreement between the parties).</p>
<p>The CDM <code class="docutils literal notranslate"><span class="pre">Contract</span></code> class incorporates all the elements that are part of the FpML <em>Trade</em> confirmation view, with the exception of the following elements: <em>tradeSummary</em>, <em>originatingPackage</em>, <em>allocations</em> and <em>approvals</em>.</p>
<p>The Rosetta <code class="docutils literal notranslate"><span class="pre">Contract</span></code> class includes a <code class="docutils literal notranslate"><span class="pre">contractState</span></code> attribute whose purpose is to specify the state of a contract as a result of an event, i.e.&nbsp;the state transition outcome as it relates to the contract state.  <strong>Note</strong>: the need to further refine this <code class="docutils literal notranslate"><span class="pre">contractState</span></code> attribute has been identified by the CDM group as part of the initial phase, and will be tackled through subsequent work.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Contract</span> <span class="o">&lt;</span><span class="s">&quot;A class to specify a contract object, which can be invoked either within the context of an event, or independently from it. It corresponds to the FpML Trade, although restricted to execution and post-execution contexts. Attributes also applicable to pre-execution (a.k.a. pre-trade view in FpML) contexts have been positioned as part of the ContractualProduct class.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">contractIdentifier</span> <span class="nf">PartyContractIdentifier</span> <span class="o">(</span><span class="mf">1.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;The contract reference identifier(s) allocated by the parties involved in the contract.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">partyTradeIdentifier</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.tradeHeader&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">partyTradeIdentifier</span> <span class="n">pathExpression</span> <span class="s">&quot;tradeHeader&quot;</span><span class="o">]</span>
 <span class="n">tradeDate</span> <span class="nf">DateInstances</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The trade date. This is the date the trade was originally executed. In the case of a novation, the novated part of the trade should be reported (by both the remaining party and the transferee) using a trade date corresponding to the date the novation was agreed. The remaining part of a trade should be reported (by both the transferor and the remaining party) using a trade date corresponding to the original execution date.&quot;</span><span class="o">&gt;;</span>
 <span class="n">clearedDate</span> <span class="nf">date</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;If the trade was cleared (novated) through a central counterparty clearing service, this represents the date the trade was cleared (transferred to the central counterparty).&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">clearedDate</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.tradeHeader&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">clearedDate</span> <span class="n">pathExpression</span> <span class="s">&quot;tradeHeader&quot;</span><span class="o">]</span>
 <span class="n">contractualProduct</span> <span class="nf">ContractualProduct</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The contractual product information that is associated with the contract. The corresponding FpML construct is the product abstract element and the associated substitution group.&quot;</span><span class="o">&gt;;</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The scope of the contract is limited to the post-execution lifecycle, as it involves legal entities and has a set of attributes which are only qualified at the execution and post-execution stage: trade date, calculation agent, documentatiom, governing law, etc.</p>
<p>The economic terms of the contract are positioned as part of the <code class="docutils literal notranslate"><span class="pre">contractualProduct</span></code> attribute, alongside the product identification and product taxonomy information.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">ContractualProduct</span> <span class="o">&lt;</span><span class="s">&quot;The contractual product class is meant to be used across the entire pre-execution, execution and (as part of the Contract) post-execution lifecycle contexts.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">productIdentification</span> <span class="nf">ProductIdentification</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
 <span class="n">productTaxonomy</span> <span class="nf">ProductTaxonomy</span> <span class="o">(</span><span class="mf">1.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;The product taxonomy value(s) associated with a contractual product.&quot;</span><span class="o">&gt;;</span>
 <span class="n">economicTerms</span> <span class="nf">EconomicTerms</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In this respect, the CDM <code class="docutils literal notranslate"><span class="pre">contract</span></code> corresponds to the confirmation view of the FpML <em>trade</em>, while the <code class="docutils literal notranslate"><span class="pre">contractualProduct</span></code> corresponds to the pre-trade view of the FpML <em>trade</em>.  (The FpML <em>trade</em> term has not been used as part of the CDM because deemed ambiguous in this respect. Its use as part of the standard is largely due to an exclusive focus on post-execution activity in the initial stages of its development. Later adjustments in this respect would have been made difficult as a result of backward compatibility considerations.)</p>
</div>
<div class="section" id="the-economic-terms">
<h4>The economic terms<a class="headerlink" href="#the-economic-terms" title="Permalink to this headline">Â¶</a></h4>
<p>The CDM <code class="docutils literal notranslate"><span class="pre">EconomicTerms</span></code> class ands the underlying <code class="docutils literal notranslate"><span class="pre">Payout</span></code> class represent a significant departure from the FpML standard. While FpML qualifies the product through the <em>product</em> substitution group, CDM specifies the various set of possible economic terms as part of those afore mentioned <code class="docutils literal notranslate"><span class="pre">economicTerms</span></code> and <code class="docutils literal notranslate"><span class="pre">payout</span></code> classes. A contractual product will then consist in an assembling of such economic terms, from which the product qualification will be syntactically inferred.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">EconomicTerms</span> <span class="o">&lt;</span><span class="s">&quot;This class represents the full set of product economics: the payout component, as well as the legal optional provisions which have valuation implications.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">payout</span> <span class="nf">Payout</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The payout specification, which can combine several payout terms, e.g. an interest rate and a credit default payout in the case of a credit default swap.&quot;</span><span class="o">&gt;;</span>
 <span class="n">earlyTerminationProvision</span> <span class="nf">EarlyTerminationProvision</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;Parameters specifying provisions relating to the optional and mandatory early termination of a swap transaction.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">earlyTerminationProvision</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swap&quot;</span><span class="o">]</span>
 <span class="n">cancelableProvision</span> <span class="nf">CancelableProvision</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;A provision that allows the specification of an embedded option within a swap giving the buyer of the option the right to terminate the swap, in whole or in part, on the early termination date.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">cancelableProvision</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swap&quot;</span><span class="o">]</span>
 <span class="n">extendibleProvision</span> <span class="nf">ExtendibleProvision</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;A provision that allows the specification of an embedded option with a swap giving the buyer of the option the right to extend the swap, in whole or in part, to the extended termination date.&quot;</span><span class="o">&gt;;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Payout</span></code> class provides some provide some appropriate insight with respect to the correspondance between an FpML product and its CDM representation, through the FpML synonyms and associated path expressions.  As an example, one can see that the FpML <em>feeLeg</em> is represented through the CDM <code class="docutils literal notranslate"><span class="pre">interestRatePayout</span></code>, while the FpML <em>singlePayment</em> and <em>initialPayment</em> are both represented through the CDM <code class="docutils literal notranslate"><span class="pre">cashflow</span></code>.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Payout</span> <span class="o">&lt;</span><span class="s">&quot;The payout can be specified through a number of combinations, e.g. by associating several interest rate payouts to specify an interest rate swap, or a credit default and an interest rate payout to specify a credit default swap. The implied product is inferred by the isProduct CDM artefact.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">interestRatePayout</span> <span class="nf">InterestRatePayout</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">swapStream</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">swapStream</span> <span class="n">pathExpression</span> <span class="s">&quot;contract.swap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">swapStream</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swaption.swap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">swapStream</span> <span class="n">pathExpression</span> <span class="s">&quot;contract.swaption.swap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">feeLeg</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">feeLeg</span> <span class="n">pathExpression</span> <span class="s">&quot;contract.creditDefaultSwap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">feeLeg</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwapOption.creditDefaultSwap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">generalTerms</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">generalTerms</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwapOption.creditDefaultSwap&quot;</span><span class="o">]</span>
 <span class="n">creditDefaultPayout</span> <span class="nf">CreditDefaultPayout</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
 <span class="n">cashflow</span> <span class="nf">Payment</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;A payment between the parties to the trade. For interest rate products, this corresponds to the FpML additionalPayment element. For credit default swaps, this corresponds to the initialPayment element and the singlePayment element of the fee leg.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">additionalPayment</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">initialPayment</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwap.feeLeg&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">singlePayment</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwap.feeLeg&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">premium</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.swaption&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">premium</span> <span class="n">pathExpression</span> <span class="s">&quot;contract.swaption&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">premium</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwapOption&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">premium</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.bondOption&quot;</span><span class="o">]</span>
 <span class="n">optionPayout</span> <span class="nf">OptionPayout</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The absence of synonym entry for the  <code class="docutils literal notranslate"><span class="pre">creditDefaultPayout</span></code> attribute is due to the fact that the corresponding CDS constructs are positioned within the <code class="docutils literal notranslate"><span class="pre">CreditDefaultPayout</span></code> class:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">CreditDefaultPayout</span> <span class="o">&lt;</span><span class="s">&quot;The credit default payout specification terms.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">generalTerms</span> <span class="nf">GeneralTerms</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;This element contains all the data that appears in the section entitled &#39;1. General Terms&#39; in the 2003 ISDA Credit Derivatives Confirmation, except for the effectiveDate, terminationDate and dateAdjustments elements, which have been positioned as part of the InterestRatePayout class.&quot;</span><span class="o">&gt;;</span>
 <span class="n">protectionTerms</span> <span class="nf">ProtectionTerms</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The credit protection terms.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">protectionTerms</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">protectionTerms</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwapOption.creditDefaultSwap&quot;</span><span class="o">]</span>
 <span class="n">cashSettlementTerms</span> <span class="nf">CashSettlementTerms</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">cashSettlementTerms</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwap&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">cashSettlementTerms</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwapOption.creditDefaultSwap&quot;</span><span class="o">]</span>
 <span class="n">physicalSettlementTerms</span> <span class="nf">PhysicalSettlementTerms</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">physicalSettlementTerms</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.creditDefaultSwapOption.creditDefaultSwap&quot;</span><span class="o">]</span>
 <span class="n">transactedPrice</span> <span class="nf">TransactedPrice</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The qualification of the price at which the contract has been transacted, in terms of market fixed rate, initial points, market price and/or quotation style. In FpML, those attributes are positioned as part of the fee leg.&quot;</span><span class="o">&gt;;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="infering-the-product-qualification-from-its-economic-terms">
<h4>Infering the product qualification from its economic terms<a class="headerlink" href="#infering-the-product-qualification-from-its-economic-terms" title="Permalink to this headline">Â¶</a></h4>
<p>The product qualification is inferred from the economic terms through a dedicated Rosetta syntax which navigate the CDM components, which has been detailed as part of the above CDM Modelling Artefacts section.</p>
<p>The qualification of a <strong>zero coupon fixed float inflation swap</strong> provides a good example of the set of logic that can be used for such purpose, and which combines boolean and qualified expressions.</p>
<p>The CDM makes use of the ISDA taxonomy V2.0 leaf level to qualify the product.  That being said, the current CDM implementation only qualifies interest rate swaps, as the ISDA taxonomy V2.0 for credit default swap references the transaction type, which values are not publicly available and hence not positioned as a CDM enumeration.  This issue will be addressed as part of later versions of the model.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">isProduct</span> <span class="n">InterestRate_InflationSwap_FixedFloat_ZeroCoupon</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">ISDA_Taxonomy_v1</span> <span class="n">value</span> <span class="n">InterestRate_IRSwap_Inflation</span><span class="o">]</span>
  <span class="n">EconomicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">interestRatePayout</span> <span class="o">-&gt;</span> <span class="n">interestRate</span> <span class="o">-&gt;</span> <span class="n">fixedRate</span> <span class="n">exists</span>
  <span class="n">and</span> <span class="n">EconomicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">interestRatePayout</span> <span class="o">-&gt;</span> <span class="n">interestRate</span> <span class="o">-&gt;</span> <span class="n">inflationRate</span> <span class="n">exists</span>
  <span class="n">and</span> <span class="n">EconomicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">interestRatePayout</span> <span class="o">-&gt;</span> <span class="n">paymentDates</span> <span class="o">-&gt;</span> <span class="n">paymentFrequency</span> <span class="o">-&gt;</span> <span class="n">periodMultiplier</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">and</span> <span class="n">EconomicTerms</span> <span class="o">-&gt;</span> <span class="n">payout</span> <span class="o">-&gt;</span> <span class="n">interestRatePayout</span> <span class="o">-&gt;</span> <span class="n">paymentDates</span> <span class="o">-&gt;</span> <span class="n">paymentFrequency</span> <span class="o">-&gt;</span> <span class="n">period</span> <span class="o">=</span> <span class="n">PeriodExtendedEnum</span><span class="o">.</span><span class="na">T</span>
</pre></div>
</div>
<p>The product qualification is positioned as part of the <code class="docutils literal notranslate"><span class="pre">ProductIdentification</span></code> class, alongside the attributes currently used in FpML to specify the product: <code class="docutils literal notranslate"><span class="pre">primaryAssetClass</span></code>, <code class="docutils literal notranslate"><span class="pre">secondaryAssetClass</span></code>, <code class="docutils literal notranslate"><span class="pre">productType</span></code> and <code class="docutils literal notranslate"><span class="pre">productId</span></code>.  This approach provides the ability to specify the credit derivatives products using this current approach until such time that an alternative approach to the transaction type is identified as a way to support a proper product qualification.</p>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">ProductIdentification</span> <span class="o">&lt;</span><span class="s">&quot;A class to combine the CDM product qualifier with other product qualifiers, such as the FpML ones.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
  <span class="n">productQualifier</span> <span class="nf">productType</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The CDM product qualifier, which corresponds to the outcome of the isProduct qualification logic. This value is derived by the CDM from the product payout features.&quot;</span><span class="o">&gt;;</span>
  <span class="n">primaryAssetClass</span> <span class="nf">AssetClassEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">scheme</span> <span class="s">&quot;assetClassScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;A classification of the most important risk class of the trade. FpML defines a simple asset class categorisation using a coding scheme.&quot;</span><span class="o">&gt;;</span>
  <span class="n">secondaryAssetClass</span> <span class="nf">AssetClassEnum</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">scheme</span> <span class="s">&quot;assetClassScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;A classification of additional risk classes of the trade, if any. FpML defines a simple asset class categorisation using a coding scheme.&quot;</span><span class="o">&gt;;</span>
  <span class="n">productType</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">scheme</span> <span class="s">&quot;productTypeScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;A classification of the type of product. FpML defines a simple product categorisation using a coding scheme.&quot;</span><span class="o">&gt;;</span>
  <span class="n">productId</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">scheme</span> <span class="s">&quot;productIdScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;A product reference identifier. The product Id is an identifier that describes the key economic characteristics of the trade type, with the exception of concepts such as size (notional, quantity, number of units) and price (fixed rate, strike, etc.) that are negotiated for each transaction. It can be used to hold identifiers such as the &#39;UPI&#39; (universal product identifier) required by certain regulatory reporting rules. It can also be used to hold identifiers of benchmark products or product temnplates used by certain trading systems or facilities. FpML does not define the domain values associated with this element. Note that the domain values for this element are not strictly an enumerated list.&quot;</span><span class="o">&gt;;</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>This CDM product qualification is stamped onto the generated CDM objects and their JSON serialized representation, as shown as part of the below JSON snippet which includes both product identification information associated with an originating FpML document and product qualification generated by the CDM:</p>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;productIdentification&quot;</span><span class="o">:</span> <span class="o">{</span>
  <span class="s">&quot;primaryAssetClass&quot;</span><span class="o">:</span> <span class="s">&quot;INTEREST_RATE&quot;</span><span class="o">,</span>
  <span class="s">&quot;productId&quot;</span><span class="o">:</span> <span class="o">[</span>
    <span class="s">&quot;InterestRate:IRSwap:OIS&quot;</span>
  <span class="o">],</span>
  <span class="s">&quot;productIdScheme&quot;</span><span class="o">:</span> <span class="s">&quot;http://www.fpml.org/coding-scheme/product-taxonomy&quot;</span><span class="o">,</span>
  <span class="s">&quot;productQualifier&quot;</span><span class="o">:</span> <span class="s">&quot;InterestRate_IRSwap_FixedFloat&quot;</span><span class="o">,</span>
  <span class="s">&quot;productType&quot;</span><span class="o">:</span> <span class="o">[</span>
   <span class="s">&quot;InterestRate:IRSwap:OIS&quot;</span>
  <span class="o">],</span>
  <span class="s">&quot;productTypeScheme&quot;</span><span class="o">:</span> <span class="s">&quot;http://www.fpml.org/coding-scheme/product-taxonomy&quot;</span><span class="o">,</span>
  <span class="s">&quot;secondaryAssetClassScheme&quot;</span><span class="o">:</span> <span class="s">&quot;http://www.fpml.org/coding-scheme/asset-class-simple&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="infering-the-event-qualification-from-its-features">
<h4>Infering the event qualification from its features<a class="headerlink" href="#infering-the-event-qualification-from-its-features" title="Permalink to this headline">Â¶</a></h4>
<p>The CDM lifecycle events are qualified as a function of the combination of their features and, when specified, the <code class="docutils literal notranslate"><span class="pre">intent</span></code>. The associated syntax is specified as part of the above CDM Modelling Artefacts section.</p>
<p>The event qualification is positioned as an attribute of the <code class="docutils literal notranslate"><span class="pre">Event</span></code> class:</p>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Event</span> <span class="n">rosettaKey</span>
<span class="o">{</span>
      <span class="n">messageInformation</span> <span class="nf">MessageInformation</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
      <span class="n">timestamp</span> <span class="nf">EventTimestamp</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">);</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">timestamp</span><span class="o">]</span>
      <span class="n">eventIdentifier</span> <span class="nf">Identifier</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">);</span>
              <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">eventIdentifier</span><span class="o">]</span>
      <span class="n">eventQualifier</span> <span class="nf">eventType</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The CDM event qualifier, which corresponds to the outcome of the isEvent qualification logic. This value is derived by the CDM from the event features.&quot;</span><span class="o">&gt;;</span>
      <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Like the product qualifier, the event qualification is stamped onto the generated CDM objects and their JSON serialized representation, as illustrated by the below JSON lifecycle event snippet:</p>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;eventDate&quot;</span><span class="o">:</span> <span class="s">&quot;2018-03-20&quot;</span><span class="o">,</span>
<span class="s">&quot;eventEffect&quot;</span><span class="o">:</span> <span class="o">{</span>
 <span class="s">&quot;referenceEvent&quot;</span><span class="o">:</span> <span class="s">&quot;d4afb0aa&quot;</span>
<span class="o">},</span>
<span class="s">&quot;eventIdentifier&quot;</span><span class="o">:</span> <span class="o">{</span>
 <span class="s">&quot;identifierValue&quot;</span><span class="o">:</span> <span class="o">{</span>
   <span class="s">&quot;identifier&quot;</span><span class="o">:</span> <span class="s">&quot;789325456&quot;</span>
 <span class="o">}</span>
<span class="o">},</span>
<span class="s">&quot;eventQualifier&quot;</span><span class="o">:</span> <span class="s">&quot;NewTradeEvent&quot;</span><span class="o">,</span>
<span class="s">&quot;messageInformation&quot;</span><span class="o">:</span> <span class="o">{</span>
 <span class="s">&quot;messageId&quot;</span><span class="o">:</span> <span class="s">&quot;1486297&quot;</span><span class="o">,</span>
 <span class="s">&quot;messageIdScheme&quot;</span><span class="o">:</span> <span class="s">&quot;http://www.party1.com/message-id&quot;</span><span class="o">,</span>
 <span class="s">&quot;sentBy&quot;</span><span class="o">:</span> <span class="s">&quot;894500DM8LVOSCMP9T34&quot;</span><span class="o">,</span>
 <span class="s">&quot;sentTo&quot;</span><span class="o">:</span> <span class="s">&quot;49300JZDC6K840D7F79&quot;</span>
<span class="o">},</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="listed-products-as-underlyers-of-derivative-products">
<h3>Listed Products as Underlyers of Derivative Products<a class="headerlink" href="#listed-products-as-underlyers-of-derivative-products" title="Permalink to this headline">Â¶</a></h3>
<p>Listed products have some (or all) of their economic terms abstracted through a <strong>product identifier</strong> and publicly disseminated by a central venue. As a result, fungibility applies as a function of this product identifier. Hence, the approach of qualifying a product from its economic terms is not applicable to such listed products.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ListedProduct</span></code> class provides a <strong>choice between the respective listed product representations</strong>.  As part of the current CDM version, only two of such products have been specified: bonds and convertible bonds.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">ListedProduct</span> <span class="n">one</span> <span class="n">of</span> <span class="o">&lt;</span><span class="s">&quot;Product which terms are abstracted through a product identifier and are then publicly available through a central venue.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">bond</span> <span class="nf">Bond</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">bond</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.bondOption&quot;</span><span class="o">]</span>
 <span class="n">convertibleBond</span> <span class="nf">ConvertibleBond</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">convertibleBond</span> <span class="n">pathExpression</span> <span class="s">&quot;trade.bondOption&quot;</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>A <strong>two-levels class inheritance structure</strong> has been specified to provide for a scalable implementation:</p>
<ul class="simple">
<li>All listed products inherit from a <code class="docutils literal notranslate"><span class="pre">ListedHeader</span></code> abstract class which contains a <code class="docutils literal notranslate"><span class="pre">productTaxonomy</span></code>, <code class="docutils literal notranslate"><span class="pre">productIdentifier</span></code> and a <code class="docutils literal notranslate"><span class="pre">description</span></code> attribute.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">ListedHeader</span> <span class="o">&lt;</span><span class="s">&quot;An abstract class to holds the attributes that are common across listed products.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span><span class="o">]</span>
 <span class="n">productTaxonomy</span> <span class="nf">ProductTaxonomy</span> <span class="o">(</span><span class="mf">1.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;The product taxonomy value(s) associated with a product.&quot;</span><span class="o">&gt;;</span>
 <span class="n">productIdentifier</span> <span class="nf">ProductIdentifier</span> <span class="o">(</span><span class="mf">1.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;There can be several identifiers associated with a given product.&quot;</span><span class="o">&gt;;</span>
 <span class="n">description</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The product name.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">description</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>Leveraging the FpML approach for underlyer components, a <code class="docutils literal notranslate"><span class="pre">FixedIncomeSecurity</span></code> and an <code class="docutils literal notranslate"><span class="pre">EquityAsset</span></code> abstract class then provide the commmon attributes for those respective type of instruments.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">FixedIncomeSecurity</span> <span class="kd">extends</span> <span class="n">ListedHeader</span> <span class="o">&lt;</span><span class="s">&quot;A fixed income security. In FpML, it corresponds to the FixedIncomeSecurityContent.model.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">issuer</span> <span class="nf">Party</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">reference</span> <span class="o">&lt;</span><span class="s">&quot;FpML implements this element as an href into the party information. Rosetta restricts the type of party that can issue a product to a legal entity. FpML provides the ability to specify the issuer name, but this is deemed insufficient in the context of Rosetta at a time when the LEI is available and of paramount importance to identify entities.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">issuerPartyReference</span><span class="o">]</span>
 <span class="n">seniority</span> <span class="nf">CreditSeniorityEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The repayment precedence of a debt instrument, as specified by a set of enumerated values.  FpML specifies that creditSeniorityTradingScheme (specified in Rosetta through the CreditSeniorityTradingEnum) overrides creditSeniorityScheme (specified in Rosetta through the CreditSeniorityEnum) when the underlyer defines the reference obligation used in a single name credit default swap trade.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">seniority</span><span class="o">]</span>
 <span class="n">couponType</span> <span class="nf">CouponTypeEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;Specifies if the bond has a variable coupon, step-up/down coupon or a zero-coupon.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">couponType</span><span class="o">]</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="loans-and-mortgages-as-underlyers-of-derivative-products">
<h3>Loans and Mortgages as Underlyers of Derivative Products<a class="headerlink" href="#loans-and-mortgages-as-underlyers-of-derivative-products" title="Permalink to this headline">Â¶</a></h3>
<p>Loans and mortgages are part of the CDM 1.0 as certain credit default swaps have such underlyers.</p>
<p>The CDM implementation closely reflects the FpML standard, and the approach here has not been to infer the product from its economic terms. This approach could be revisited at a later point, once those products are fully represented as part of the CDM, i.e. not just as underlyer components.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Loan</span> <span class="kd">extends</span> <span class="n">IdentifiedAsset</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">Loan</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">borrower</span> <span class="nf">LegalEntity</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;Specifies the borrower. There can be more than one borrower. It is meant to be used in the event that there is no Bloomberg Id or the Secured List isn&#39;t applicable.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">borrower</span><span class="o">]</span>
 <span class="n">borrowerReference</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">reference</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">borrowerReference</span><span class="o">]</span>
 <span class="n">lien</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">scheme</span> <span class="s">&quot;lienScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;Specifies the seniority level of the lien.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">lien</span><span class="o">]</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Mortgage</span> <span class="kd">extends</span> <span class="n">FixedIncomeSecurity</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">Mortgage</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">pool</span> <span class="nf">AssetPool</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The mortgage pool that is underneath the mortgage obligation.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">pool</span><span class="o">]</span>
 <span class="n">sector</span> <span class="nf">MortgageSectorEnum</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The sector classification of the mortgage obligation.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">sector</span><span class="o">]</span>
 <span class="n">tranche</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The mortgage obligation tranche that is subject to the derivative transaction.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">tranche</span><span class="o">]</span>
 <span class="o">(...)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="event-model">
<h2>Event Model<a class="headerlink" href="#event-model" title="Permalink to this headline">Â¶</a></h2>
<p>The CDM event model is based upon the same high-level principles as the product model:</p>
<ul class="simple">
<li>The events are specified by composition of <strong>primitive events</strong>, which make in turn use of a large set of FpML building blocks;</li>
<li>The event qualification is inferred from those primitive events and, in some relevant cases, from an <strong>intent</strong> qualifier.</li>
</ul>
<div class="section" id="baseline-event-modelling-features">
<h3>Baseline event modelling features<a class="headerlink" href="#baseline-event-modelling-features" title="Permalink to this headline">Â¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Event</span></code> class carries the following set of information:</p>
<ul class="simple">
<li><strong>Messaging information</strong>: <code class="docutils literal notranslate"><span class="pre">messageId</span></code>, <code class="docutils literal notranslate"><span class="pre">sentBy</span></code>, <code class="docutils literal notranslate"><span class="pre">sentTo</span></code> and <code class="docutils literal notranslate"><span class="pre">copyTo</span></code>. This information is optional, as possibly not applicable in a context such as blockchain. It corresponds to some of the components of the FpML <em>MessageHeader.model</em>.</li>
<li><strong>Timestamp information</strong>: <code class="docutils literal notranslate"><span class="pre">creationTimestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">expiryTimestamp</span></code>. In FpML, this information is also positioned as part of the <em>MessageHeader.model</em>.</li>
<li><strong>Event identification</strong> information: the <code class="docutils literal notranslate"><span class="pre">identifier</span></code>, alongside an optional <code class="docutils literal notranslate"><span class="pre">version</span></code> and <code class="docutils literal notranslate"><span class="pre">issuer</span></code>. As a departure from FpML, which makes use of an event identifier construct (the <em>Correlation</em> which is distinct from the one associated with the trade (which itself comes in different variation: <em>PartyTradeIdentifier</em>, with the <em>TradeId</em> and the <em>VersionedTradeId</em> as sub-components of it), the CDM approach consists in using a common identifier component across products and events.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Identifier</span>
<span class="o">{</span>
 <span class="n">issuer</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">reference</span> <span class="n">scheme</span> <span class="s">&quot;issuerIdScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;The reference to the party that assigns the trade identifier.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">issuer</span><span class="o">]</span>
 <span class="n">identifierValue</span> <span class="nf">IdentifierValue</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">);</span>
 <span class="n">version</span> <span class="nf">int</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">version</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">version</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">version</span> <span class="n">pathExpression</span> <span class="s">&quot;versionedTradeId&quot;</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">version</span> <span class="n">pathExpression</span> <span class="s">&quot;versionedTradeId&quot;</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><strong>event qualifier</strong>, which is derived from the event features.</li>
<li><strong>Time dimension</strong> information, through the <code class="docutils literal notranslate"><span class="pre">eventDate</span></code> and <code class="docutils literal notranslate"><span class="pre">effectiveDate</span></code>, with this latter being optional as not applicable to certain events (e.g. observations).</li>
<li><strong>Action qualification</strong>, to specify whether the event is a new one, a correction or a cancellation of a prior one.</li>
<li><strong>Intent qualification</strong>, in the form of a set of enumerated values, such as <code class="docutils literal notranslate"><span class="pre">allocation</span></code>, <code class="docutils literal notranslate"><span class="pre">earlyTermination</span></code>, <code class="docutils literal notranslate"><span class="pre">partialTermination</span></code>, etc.  This intent is used as part of the event qualification, in order to disambiguate events which features are shared across lifecycle events. As an example, a reduction in a trade quantity/notional could apply to a correction event or a partial termination (although the timing of such event could also be used to qualify the proper event).</li>
<li><strong>Party information</strong>, which is optional because not applicable to certain events (e.g. most of the observation events).</li>
<li><strong>Lineage information</strong>, in the form of a class that provides the ability to reference an unbounded set of contracts or events, as shown by the below code snippet:</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Lineage</span>
<span class="o">{</span>
 <span class="n">contractReference</span> <span class="nf">Identifier</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">scheme</span> <span class="s">&quot;correlationIdScheme&quot;</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">contractReference</span><span class="o">]</span>
 <span class="n">eventReference</span> <span class="nf">Identifier</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">eventReference</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><strong>Primitive events</strong>: the CDM composite approach uses the primitive events as its building blocks. Those primitive events are detailed in the next section of the documentation.</li>
<li><strong>Function call</strong>: an example of such a function call is the interpolation function that would be associated with a <strong>derived observation</strong> event that assembles two observed values (say, a 3 months and a 6 months rate observation) to provide a derived one (say, a 5 months observation). As part of the current CDM version this function call as been specified as a mere string element. It will be appropriately specified once such implementation is developed, some of which consisting in the machine readable implementation of the ISDA Definitions (see next Interest Calculation section).</li>
<li><strong>EventEffect</strong> corresponds to the set of operational and positional effects associated with a lifecycle event. This information is generated by the CDM and takes the form of a set of pointers to the relevant objects that are associated with a lifecycle event. The candidate objects are the classes that have an associated <code class="docutils literal notranslate"><span class="pre">rosettaKey</span></code>. At present, those are the <code class="docutils literal notranslate"><span class="pre">Contract</span></code>, <code class="docutils literal notranslate"><span class="pre">Payment</span></code>, <code class="docutils literal notranslate"><span class="pre">ListedProduct</span></code> and <code class="docutils literal notranslate"><span class="pre">ContractOrContractReference</span></code>. The <code class="docutils literal notranslate"><span class="pre">rosettaKey</span></code> is also associated with the <code class="docutils literal notranslate"><span class="pre">Event</span></code> so that a query of the <code class="docutils literal notranslate"><span class="pre">EventEffect</span></code> instantiated objects can provide a link to the respective event events. Events such as observations do not have an event effect, hence the optional cardinality.</li>
</ul>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">EventEffect</span> <span class="o">&lt;</span><span class="s">&quot;The set of operational and positional effects associated with a lifecycle event.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">referenceContract</span> <span class="nf">Contract</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the contract to which the event effect(s) apply. This reference is optional to address the case where an event with candidate event effect(s) would only have associated referenceContract.&quot;</span><span class="o">&gt;;</span>
 <span class="n">referenceEvent</span> <span class="nf">Event</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the event to which the event effect(s) apply.&quot;</span><span class="o">&gt;;</span>
 <span class="n">product</span> <span class="nf">ContractOrListedProduct</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the products effect(s), an example of such being the outcome of an option physical exercise.&quot;</span><span class="o">&gt;;</span>
 <span class="n">payment</span> <span class="nf">Payment</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the payment effect(s).&quot;</span><span class="o">&gt;;</span>
 <span class="n">reset</span> <span class="nf">ResetPrimitive</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="n">rosettaKey</span> <span class="o">&lt;</span><span class="s">&quot;A pointer to the reset effect(s).&quot;</span><span class="o">&gt;;</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>In the below JSON snippet of a swaption cash exercise, we can see that the eventEffect hash value points to the rosettaKeyentry that is associated with the payment.</p>
<blockquote>
<div><div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;eventDate&quot;</span><span class="o">:</span> <span class="s">&quot;2018-04-10&quot;</span><span class="o">,</span>
<span class="s">&quot;eventEffect&quot;</span><span class="o">:</span> <span class="o">{</span>
 <span class="s">&quot;payment&quot;</span><span class="o">:</span> <span class="o">[</span>
   <span class="s">&quot;5cafa672&quot;</span>
 <span class="o">],</span>
 <span class="s">&quot;referenceContract&quot;</span><span class="o">:</span> <span class="o">[</span>
   <span class="s">&quot;366e1ca6&quot;</span>
 <span class="o">],</span>
 <span class="s">&quot;referenceEvent&quot;</span><span class="o">:</span> <span class="s">&quot;d70cf2e&quot;</span>
<span class="o">(...)</span>
<span class="s">&quot;payment&quot;</span><span class="o">:</span> <span class="o">{</span>
<span class="s">&quot;payerReceiver&quot;</span><span class="o">:</span> <span class="o">{</span>
  <span class="s">&quot;payerPartyReference&quot;</span><span class="o">:</span> <span class="s">&quot;Party2&quot;</span><span class="o">,</span>
  <span class="s">&quot;receiverPartyReference&quot;</span><span class="o">:</span> <span class="s">&quot;Party1&quot;</span>
<span class="o">},</span>
<span class="s">&quot;paymentAmount&quot;</span><span class="o">:</span> <span class="o">{</span>
  <span class="s">&quot;amount&quot;</span><span class="o">:</span> <span class="mf">458600.53</span><span class="o">,</span>
  <span class="s">&quot;currency&quot;</span><span class="o">:</span> <span class="s">&quot;EUR&quot;</span>
<span class="o">},</span>
<span class="s">&quot;paymentDate&quot;</span><span class="o">:</span> <span class="o">{</span>
  <span class="s">&quot;adjustedDate&quot;</span><span class="o">:</span> <span class="s">&quot;2019-04-17&quot;</span><span class="o">,</span>
  <span class="s">&quot;dateAdjustments&quot;</span><span class="o">:</span> <span class="o">{</span>
    <span class="s">&quot;businessCenters&quot;</span><span class="o">:</span> <span class="o">{</span>
      <span class="s">&quot;businessCenter&quot;</span><span class="o">:</span> <span class="o">[</span>
        <span class="s">&quot;EUTA&quot;</span><span class="o">,</span>
        <span class="s">&quot;GBLO&quot;</span>
      <span class="o">]</span>
    <span class="o">},</span>
    <span class="s">&quot;businessDayConvention&quot;</span><span class="o">:</span> <span class="s">&quot;MODFOLLOWING&quot;</span>
  <span class="o">},</span>
  <span class="s">&quot;unadjustedDate&quot;</span><span class="o">:</span> <span class="s">&quot;2019-04-14&quot;</span>
<span class="o">},</span>
<span class="s">&quot;rosettaKey&quot;</span><span class="o">:</span> <span class="s">&quot;5cafa672&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="primitive-events">
<h3>Primitive events<a class="headerlink" href="#primitive-events" title="Permalink to this headline">Â¶</a></h3>
<p>CDM primitive events are the building block components used to specify business events.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">PrimitiveEvent</span> <span class="o">&lt;</span><span class="s">&quot;The set of primitive events. The purpose of this class it to provide clarity with respect to the event qualification logic.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">newTrade</span> <span class="nf">NewTradePrimitive</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*)</span> <span class="o">&lt;</span><span class="s">&quot;The new trade primitive is unbounded to address the case of events such as portfolio compressions, which could result in multiple new trades.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">newTrade</span><span class="o">]</span>
 <span class="n">quantityChange</span> <span class="nf">QuantityChangePrimitive</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">quantityChange</span><span class="o">]</span>
 <span class="n">allocation</span> <span class="nf">AllocationPrimitive</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">allocation</span><span class="o">]</span>
 <span class="n">termsChange</span> <span class="nf">TermsChangePrimitive</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">otherTermsChange</span><span class="o">]</span>
 <span class="n">exercise</span> <span class="nf">ExercisePrimitive</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">exercise</span><span class="o">]</span>
 <span class="n">observation</span> <span class="nf">ObservationPrimitive</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">observation</span><span class="o">]</span>
 <span class="n">reset</span> <span class="nf">ResetPrimitive</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">reset</span><span class="o">]</span>
 <span class="n">payment</span> <span class="nf">Payment</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">payment</span><span class="o">]</span>
 <span class="o">}</span>
</pre></div>
</div>
<div class="section" id="event-qualification-from-primitive-events-and-intent-qualification">
<h4>Event qualification from primitive events and intent qualification<a class="headerlink" href="#event-qualification-from-primitive-events-and-intent-qualification" title="Permalink to this headline">Â¶</a></h4>
<p>Similar to the product modelling approach, the event qualification is inferred from the primitive events.</p>
<p>One distinction with the product approach is that the <code class="docutils literal notranslate"><span class="pre">intent</span></code> qualification is also deemed necessary to complement such primitive event information in certain cases. To this effect, the Rosetta event qualification syntax provides the ability to specify that the intent must have a specified value <em>when present</em>, as illustrated by the below snippet.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">isEvent</span> <span class="n">Termination</span> <span class="o">&lt;</span><span class="s">&quot;The qualification of a termination event from the fact that (i) the intent is Termination when specified, (ii) the only primitive is the quantityChange and there is only one such primitive involved, the (iii) the remaining quantity is null, and (iv) the contract state has the value &#39;terminated&#39;.&quot;</span><span class="o">&gt;</span>
 <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">intent</span> <span class="n">when</span> <span class="n">present</span> <span class="o">=</span> <span class="n">IntentEnum</span><span class="o">.</span><span class="na">Termination</span>
 <span class="n">and</span> <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="n">single</span> <span class="n">exists</span>
 <span class="n">or</span> <span class="n">quantityAfterQuantityChange</span> <span class="o">=</span> <span class="mf">0.0</span>
 <span class="n">and</span> <span class="o">(</span> <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="o">-&gt;</span> <span class="n">after</span> <span class="o">-&gt;</span> <span class="n">contract</span> <span class="o">-&gt;</span> <span class="n">state</span> <span class="o">=</span> <span class="n">StateEnum</span><span class="o">.</span><span class="na">Terminated</span>
 <span class="n">or</span> <span class="n">Event</span> <span class="o">-&gt;</span> <span class="n">primitive</span> <span class="o">-&gt;</span> <span class="n">quantityChange</span> <span class="o">-&gt;</span> <span class="n">after</span> <span class="o">-&gt;</span> <span class="n">contractReference</span> <span class="o">-&gt;</span> <span class="n">state</span> <span class="o">=</span> <span class="n">StateEnum</span><span class="o">.</span><span class="na">Terminated</span> <span class="o">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="interest-calculation">
<h2>Interest Calculation<a class="headerlink" href="#interest-calculation" title="Permalink to this headline">Â¶</a></h2>
<p>The current CDM version implements the <strong>Fixed Amount</strong> and <strong>Floating Amount</strong> ISDA 2006 Definitions, alongside with some of the day count fractions.</p>
<div class="section" id="fixed-amount-and-floating-amount-definitions">
<h3>Fixed Amount and Floating Amount Definitions<a class="headerlink" href="#fixed-amount-and-floating-amount-definitions" title="Permalink to this headline">Â¶</a></h3>
<p>The CDM syntax to express the Fixed Amount and Floating Amount is similar in structure: a calculation that reflects the terms of the ISDA 2006 Definitions, and associated arguments.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">calculation</span> <span class="n">FixedAmount</span> <span class="o">&lt;</span><span class="s">&quot;2006 ISDA Definition Article 5 Section 5.1. Calculation of a Fixed Amount: The Fixed Amount payable by a party on a Payment Date will be: (a) if an amount is specified for the Swap Transaction as the Fixed Amount payable by that party for that Payment Date or for the related Calculation Period, that amount; or (b) if an amount is not specified for the Swap Transaction as the Fixed Amount payable by that party for that Payment Date or for the related Calculation Period, an amount calculated on a formula basis for that Payment Date or for the related Calculation Period as follows: Fixed Amount = Calculation Amount Ã Fixed Rate Ã Day Count Fraction.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">fixedAmount</span> <span class="n">number</span><span class="o">:</span> <span class="n">calculationAmount</span> <span class="o">*</span> <span class="n">rate</span> <span class="o">*</span> <span class="n">dayCountFraction</span>
 <span class="n">currencyAmount</span> <span class="n">CurrencyEnum</span><span class="o">:</span> <span class="n">currencyAmount</span>
<span class="o">}</span>

<span class="n">arguments</span> <span class="n">FixedAmount</span> <span class="o">&lt;</span><span class="s">&quot;The set of arguments to calculate the FixedAmount.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">calculationAmount</span><span class="o">:</span> <span class="n">is</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">quantity</span> <span class="o">-&gt;</span> <span class="n">notionalSchedule</span> <span class="o">-&gt;</span> <span class="n">notionalStepSchedule</span> <span class="o">-&gt;</span> <span class="n">initialValue</span>
 <span class="n">currencyAmount</span><span class="o">:</span> <span class="n">is</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">quantity</span> <span class="o">-&gt;</span> <span class="n">notionalSchedule</span> <span class="o">-&gt;</span> <span class="n">notionalStepSchedule</span> <span class="o">-&gt;</span> <span class="n">currency</span>
 <span class="n">rate</span><span class="o">:</span> <span class="n">is</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">interestRate</span> <span class="o">-&gt;</span> <span class="n">fixedRate</span> <span class="o">-&gt;</span> <span class="n">initialValue</span>
 <span class="n">dayCountFraction</span><span class="o">:</span> <span class="n">is</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">dayCountFraction</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">calculation</span> <span class="n">FloatingAmount</span> <span class="o">&lt;</span><span class="s">&quot;2006 ISDA Definition Article 6 Section 6.1. Calculation of a Floating Amount: Subject to the provisions of Section 6.4 (Negative Interest Rates), the Floating Amount payable by a party on a Payment Date will be: (a) if Compounding is not specified for the Swap Transaction or that party, an amount calculated on a formula basis for that Payment Date or for the related Calculation Period as follows: Floating Amount = Calculation Amount Ã Floating Rate + Spread Ã Floating Rate Day Count Fraction (b) if âCompoundingâ is specified to be applicable to the Swap Transaction or that party and &#39;Flat Compounding&#39; is not specified, an amount equal to the sum of the Compounding Period Amounts for each of the Compounding Periods in the related Calculation Period; or (c) if &#39;Flat Compounding&#39; is specified to be applicable to the Swap Transaction or that party, an amount equal to the sum of the Basic Compounding Period Amounts for each of the Compounding Periods in the related Calculation Period plus the sum of the Additional Compounding Period Amounts for each such Compounding Period.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
  <span class="n">floatingAmount</span> <span class="n">number</span><span class="o">:</span> <span class="n">calculationAmount</span> <span class="o">*</span> <span class="o">(</span> <span class="n">floatingRate</span> <span class="o">+</span> <span class="n">spread</span> <span class="o">)</span> <span class="o">*</span> <span class="n">dayCountFraction</span>
  <span class="n">currencyAmount</span> <span class="n">CurrencyEnum</span><span class="o">:</span> <span class="n">currencyAmount</span>
<span class="o">}</span>

<span class="n">arguments</span> <span class="n">FloatingAmount</span> <span class="o">&lt;</span><span class="s">&quot;The set of arguments to calculate the FloatingAmount.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
  <span class="n">calculationAmount</span><span class="o">:</span> <span class="n">is</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">quantity</span> <span class="o">-&gt;</span> <span class="n">notionalSchedule</span> <span class="o">-&gt;</span> <span class="n">notionalStepSchedule</span> <span class="o">-&gt;</span> <span class="n">initialValue</span>
  <span class="n">currencyAmount</span><span class="o">:</span> <span class="n">is</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">quantity</span> <span class="o">-&gt;</span> <span class="n">notionalSchedule</span> <span class="o">-&gt;</span> <span class="n">notionalStepSchedule</span> <span class="o">-&gt;</span> <span class="n">currency</span>
  <span class="n">floatingRate</span><span class="o">:</span> <span class="n">is</span> <span class="nf">ResolveRateIndex</span><span class="o">(</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">interestRate</span> <span class="o">-&gt;</span> <span class="n">floatingRate</span> <span class="o">-&gt;</span> <span class="n">floatingRateIndex</span> <span class="o">)</span> <span class="o">-&gt;</span> <span class="n">rate</span>
  <span class="n">spread</span><span class="o">:</span> <span class="n">is</span> <span class="nf">GetRateSchedule</span><span class="o">(</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">interestRate</span> <span class="o">-&gt;</span> <span class="n">floatingRate</span> <span class="o">)</span> <span class="o">-&gt;</span> <span class="n">schedule</span> <span class="o">-&gt;</span> <span class="n">initialValue</span>
  <span class="n">dayCountFraction</span><span class="o">:</span> <span class="n">is</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">dayCountFraction</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="day-count-fractions">
<h3>Day Count Fractions<a class="headerlink" href="#day-count-fractions" title="Permalink to this headline">Â¶</a></h3>
<p>The current CDM version incorporates day count fractions calculations which are quite representative of the set of day count fractions that are specified as part of the ISDA 2006 Definitions.  Among those are the 30E/360 and the ACT/365.FIXED day count fractions. While the <strong>30E/360</strong> definition specifies the actual computation in quite details as a result of the use of a 360 days year and a 30 maximum days month, the <strong>ACT/365.FIXED</strong> is much simpler and relies upon a computation of the number of days in a period which is not specified as part of the syntax because not involving any specific logic.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">calculation</span> <span class="n">DayCountFractionEnum</span><span class="o">.</span><span class="na">_30E_360</span> <span class="o">&lt;</span><span class="s">&quot;2006 ISDA Definition Article 4 section 4.16(g): If &#39;30E/360&#39; or &#39;Eurobond Basis&#39; is specified, the number of days in the Calculation Period or Compounding Period in respect of which payment is being made divided by 360, calculated on a formula basis as follows:[[360 x (Y2 - Y1)] + [30 x (M2 - M1)] + (D2 - D1)]/360&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
  <span class="n">number</span><span class="o">:</span> <span class="o">(</span><span class="mi">360</span> <span class="o">*</span> <span class="o">(</span><span class="n">endYear</span> <span class="o">-</span> <span class="n">startYear</span><span class="o">)</span> <span class="o">+</span> <span class="mi">30</span> <span class="o">*</span> <span class="o">(</span><span class="n">endMonth</span> <span class="o">-</span> <span class="n">startMonth</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">endDay</span> <span class="o">-</span> <span class="n">startDay</span><span class="o">))</span> <span class="o">/</span> <span class="mi">360</span>
<span class="o">}</span>

<span class="n">arguments</span> <span class="n">DayCountFractionEnum</span><span class="o">.</span><span class="na">_30E_360</span> <span class="o">&lt;</span><span class="s">&quot;2006 ISDA Definition Article 4 section 4.16(g). &#39;Y1&#39; is the year, expressed as a number, in which the first day of the Calculation Period or Compounding Period falls; &#39;Y2&#39; is the year, expressed as a number, in which the day immediately following the last day included in the Calculation Period or Compounding Period falls; &#39;M1&#39; is the calendar month, expressed as a number, in which the first day of the Calculation Period or Compounding Period falls; &#39;M2&#39; is the calendar month, expressed as a number, in which the day immediately following the last day included in the Calculation Period or Compounding Period falls; &#39;D1&#39; is the first calendar day, expressed as a number, of the Calculation Period or Compounding Period, unless such number would be 31, in which case D1 will be 30; and &#39;D2&#39; is the calendar day, expressed as a number, immediately following the last day included in the Calculation Period or Compounding Period, unless such number would be 31, in which case D2 will be 30.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">alias</span> <span class="n">period</span> <span class="nf">CalculationPeriod</span><span class="o">(</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">calculationPeriodDates</span> <span class="o">)</span>

 <span class="n">endYear</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">endDate</span> <span class="o">-&gt;</span> <span class="n">year</span>
 <span class="n">startYear</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">startDate</span> <span class="o">-&gt;</span> <span class="n">year</span>
 <span class="n">endMonth</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">endDate</span> <span class="o">-&gt;</span> <span class="n">month</span>
 <span class="n">startMonth</span> <span class="o">:</span> <span class="n">is</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">startDate</span> <span class="o">-&gt;</span> <span class="n">month</span>
 <span class="n">startDay</span> <span class="o">:</span> <span class="n">is</span> <span class="nf">Min</span><span class="o">(</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">startDate</span> <span class="o">-&gt;</span> <span class="n">day</span><span class="o">,</span> <span class="mi">30</span> <span class="o">)</span>
 <span class="n">endDay</span> <span class="o">:</span> <span class="n">is</span> <span class="nf">Min</span><span class="o">(</span> <span class="n">period</span> <span class="o">-&gt;</span> <span class="n">endDate</span> <span class="o">-&gt;</span> <span class="n">day</span><span class="o">,</span> <span class="mi">30</span> <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="n">calculation</span> <span class="n">DayCountFractionEnum</span><span class="o">.</span><span class="na">ACT_365_FIXED</span> <span class="o">&lt;</span><span class="s">&quot;&#39;2006 ISDA Definition Article 4 section 4.16(d): If&#39;Actual/365 (Fixed)&#39;, &#39;Act/365 (Fixed)&#39;, &#39;A/365 (Fixed)&#39; or &#39;A/365F&#39; is specified, the actual number of days in the Calculation Period or Compounding Period in respect of which payment is being made divided by 365.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
  <span class="n">number</span> <span class="o">:</span> <span class="n">daysInPeriod</span> <span class="o">/</span> <span class="mi">365</span>
<span class="o">}</span>

<span class="n">arguments</span> <span class="n">DayCountFractionEnum</span><span class="o">.</span><span class="na">ACT_365_FIXED</span>
<span class="o">{</span>
  <span class="n">daysInPeriod</span> <span class="o">:</span> <span class="n">is</span> <span class="nf">DaysInPeriod</span><span class="o">(</span> <span class="n">InterestRatePayout</span> <span class="o">-&gt;</span> <span class="n">calculationPeriodDates</span> <span class="o">)</span> <span class="o">-&gt;</span> <span class="n">days</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reference-data-model">
<h2>Reference Data Model<a class="headerlink" href="#reference-data-model" title="Permalink to this headline">Â¶</a></h2>
<p>CDM only integrates the reference data components that are specifically needed to model the in-scope products, events and interest calculation components.</p>
<p>This translate into the representation of the <strong>party</strong>, with two alternate representations, modeled as attributes: the <strong>legal entity</strong> and the <strong>natural person</strong>.  Indeed, a number of product constructs, such as those applicable to credit default swaps, make use of a a legal entity representation.</p>
<p>It is expected that this CDM reference data representation will be further expanded once use cases for the model will be firmed out.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Party</span> <span class="o">&lt;</span><span class="s">&quot;The party class.&quot;</span><span class="o">&gt;</span>
  <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">Party</span><span class="o">]</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">anchor</span><span class="o">;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span><span class="o">]</span>
 <span class="n">partyId</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="n">scheme</span> <span class="s">&quot;partyIdScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;The identifier associated with a party, e.g. the 20 digits LEI code.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">partyId</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">Rosetta_Workbench</span> <span class="n">value</span> <span class="n">partyId</span><span class="o">]</span>
 <span class="n">legalEntity</span> <span class="nf">LegalEntity</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
 <span class="n">naturalPerson</span> <span class="nf">NaturalPerson</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
<span class="o">}</span>

<span class="n">choice</span> <span class="n">rule</span> <span class="n">Party_choice</span> <span class="o">&lt;</span><span class="s">&quot;A party is either a legal entity or a natural person.&quot;</span><span class="o">&gt;</span>
 <span class="k">for</span> <span class="n">Party</span> <span class="n">optional</span> <span class="n">choice</span> <span class="n">between</span>
 <span class="n">legalEntity</span> <span class="n">and</span> <span class="n">naturalPerson</span>

<span class="kd">class</span> <span class="nc">LegalEntity</span> <span class="o">&lt;</span><span class="s">&quot;A class to represent the attributes that are specific to a legal entity.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">id</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">id</span><span class="o">]</span>
 <span class="n">entityId</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="n">scheme</span> <span class="s">&quot;entityIdScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;A legal entity identifier (e.g. RED entity code).&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">entityId</span><span class="o">]</span>
 <span class="n">name</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="n">scheme</span> <span class="s">&quot;entityNameScheme&quot;</span> <span class="o">&lt;</span><span class="s">&quot;The legal entity name.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">partyName</span><span class="o">]</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">entityName</span><span class="o">]</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">NaturalPerson</span> <span class="o">&lt;</span><span class="s">&quot;A class to represent the attributes that are specific to a natural person.&quot;</span><span class="o">&gt;</span>
<span class="o">{</span>
 <span class="n">honorific</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;An honorific title, such as Mr., Ms., Dr. etc.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">honorific</span><span class="o">]</span>
 <span class="n">firstName</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The natural person&#39;s first name. It is optional in FpML.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">firstName</span><span class="o">]</span>
 <span class="n">middleName</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">firstName</span><span class="o">]</span>
 <span class="n">initial</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0.</span><span class="o">.*);</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">initial</span><span class="o">]</span>
 <span class="n">surname</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The natural person&#39;s surname. It is optional in FpML.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">surname</span><span class="o">]</span>
 <span class="n">suffix</span> <span class="nf">string</span> <span class="o">(</span><span class="mf">0..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;Name suffix, such as Jr., III, etc.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">suffix</span><span class="o">]</span>
 <span class="n">dateOfBirth</span> <span class="nf">date</span> <span class="o">(</span><span class="mf">1..1</span><span class="o">)</span> <span class="o">&lt;</span><span class="s">&quot;The natural person&#39;s date of birth.&quot;</span><span class="o">&gt;;</span>
   <span class="o">[</span><span class="n">synonym</span> <span class="n">FpML</span> <span class="n">value</span> <span class="n">dateOfBirth</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to the ISDA CDM documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, ISDA.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.30',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>